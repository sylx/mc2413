{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?de97","webpack:///./src/views/Home.vue?91e4","webpack:///./src/components/PianoRoll.vue?7100","webpack:///./src/plugins/bootstrap-vue.js","webpack:///./src/App.vue?deae","webpack:///./src/lib/mc2413.js","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?29de","webpack:///./src/components/MmlEditor.vue?1cec","webpack:///src/components/MmlEditor.vue","webpack:///./src/components/MmlEditor.vue?b17e","webpack:///./src/components/MmlEditor.vue","webpack:///./src/components/PianoRoll.vue?b2f5","webpack:///./src/components/PianoRoll.js","webpack:///./src/components/PianoRoll.js?37e2","webpack:///./src/components/PianoRoll.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?538d","webpack:///./src/views/Home.vue","webpack:///./src/router.js","webpack:///./src/lib/mml/parser.js","webpack:///./src/lib/mml/compiler.js","webpack:///./src/store/synth.js","webpack:///./src/store.js","webpack:///./src/main.js","webpack:///./src/components/MmlEditor.vue?26d2"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","jsonpScriptSrc","p","about","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","head","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Home_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Home_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PianoRoll_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PianoRoll_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","Vue","use","BootstrapVue","Appvue_type_template_id_81718c44_render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","variant","_v","is-nav","to","staticRenderFns","Tone","Synth","_classCallCheck","tone","selected_tone","initSynth","masterChannel","Channel","volume","toMaster","createChannel","oscillator","envelope","attack","decay","sustain","release","portamento","connect","interval","velocity","time","channel","getTone","triggerAttack","normalizeInterval","setNote","triggerRelease","duration","triggerAttackRelease","store","_this","test_note","subscribeAction","action","state","payload","noteOn","noteChange","noteOff","trans","A+","A-","B+","B-","C+","C-","D+","D-","E+","E-","F+","F-","G+","G-","toUpperCase","match","transport","Transport","_beats","beats","add","Time","Sequencer","synth","PPQ","loop","_this2","stop","storeEvent","context","latencyHint","start","_this3","cancel","indicator","Loop","Draw","schedule","dispatch","position","toTicks","_","forIn","sequence","processTrack","_this4","part","Part","processEvent","map","loopEnd","Infinity","filter","evt","forEach","bpm","count","log","loopStart","end","before","_this5","noteOnOff","tr","MC2413","sequencer","connectStore","Appvue_type_script_lang_js_mc2413","mc2413","Appvue_type_script_lang_js_","mounted","$store","src_Appvue_type_script_lang_js_","component","componentNormalizer","App","Homevue_type_template_id_33b5fe19_render","sm","disabled","_s","Number","pianoroll_scale","toFixed","min","max","step","model","callback","$$v","_n","expression","text","pianoroll_quantize","_l","on","click","$event","scale","quantize","size","playTransport","stopTransport","small","_e","transportPositionBars","Homevue_type_template_id_33b5fe19_staticRenderFns","MmlEditorvue_type_template_id_0ca96ae4_render","ref","mml","options","cmOptions","show","mmlError","message","MmlEditorvue_type_template_id_0ca96ae4_staticRenderFns","lib_codemirror_default","a","defineMode","token","stream","column","next","lastError","registerHelper","cm","Pos","line","from","MmlEditorvue_type_script_lang_js_","components","codemirror","vue_codemirror","theme","lineNumbers","lineWrapping","styleActiveLine","styleSelectedText","lint","gutters","computed","_objectSpread","$refs","vuex_esm","initCodeMirror","subscribe","mutation","note","selections","changeCursorByProc","focus","setCursor","anchor","getDoc","setSelections","lodash_default","values","methods","ch","getValue","cursor","getCursor","components_MmlEditorvue_type_script_lang_js_","MmlEditor_component","MmlEditor","PianoRollvue_type_template_id_7acc827e_render","ondragstart","ondrop","width","quantize_width","height","patternUnits","patternContentUnits","x","grid_offset","util","range","b","transform","getTransform","y","class","getLineClass","x1","y1","x2","y2","stage_pos","stage_width","octaves","fill","mousedown","onDrag","mouseup","mousemove","wheel","preventDefault","getXfromTime","getYfromNote","onClickNote","getHeightfromNote","getNoteColor","selected","stroke","getNoteName","cursorX","Math","data-octave","onKeyboard","mouseout","data-note","PianoRollvue_type_template_id_7acc827e_staticRenderFns","NOTE_MAP","C","D","E","F","G","A","B","C#","D#","F#","G#","A#","NOTE_COLOR_MIN","NOTE_COLOR_MID","NOTE_COLOR_MAX","PianoRollvue_type_script_lang_js_","props","default","String","last_pos","selection","addEventListener","updateStageWidth","setStagePos","cx","setCenterInterval","flushKeyboard","pos","some","beforeDestroy","removeEventListener","PianoRollvue_type_script_lang_js_objectSpread","mapGetters","watch","newVal","oldVal","concat","offsetX","offsetY","buttons","deltaY","dataset","parentNode","octave","wrapper","offsetWidth","offsetHeight","normalizeNote","E#","org_name","len","active","color","v","Color","mix","lighten","rgb","string","delay","nn","toLowerCase","dom","piano","querySelector","fn","classList","remove","$set","ydir","timer","stage","components_PianoRollvue_type_script_lang_js_","PianoRoll_component","PianoRoll","Homevue_type_script_lang_js_","pianoroll_quantize_options","transportPosition","Homevue_type_script_lang_js_objectSpread","padStart","floor","transportPlaying","views_Homevue_type_script_lang_js_","Home_component","Home","Router","router","routes","path","then","isEmpty","space","P","regexp","node","space_exists","number","parseInt","empty","of","desc","rest","alt","many","slur","withLength","seq","or","skip","setLength","withAmount","command","comment","seqMap","loop_start","loop_end","cl","flat","track","sp","MmlParser","sepBy","newline","triggerError","SyntaxError","clone","limit","TokenScanner","compiler_classCallCheck","index","peek","MmlCompiler","defaultParams","tracks","merge","mapValues","clear","ast","parse","status","expected","join","split","getTrack","createTrack","compileMml","getData","is_slur","calcDuration","calcLength","last_ln","is_tie","tie","ln","scanner","loop_stack","hasNext","prev","expect","getIndex","setIndex","pop","compiler","compileMML","compile","initialMML","namespaced","getters","noteSequence","flatten","mutations","updateSequence","updateMml","updateMmlError","updateTransportPlaying","isPlaying","actions","noteOnTestTone","noteOffTestTone","changeMML","commit","changeCursorMML","errorMML","toString","changePianoRoll","playSequence","stopSequence","tickSequence","beforeNoteOn","selectNote","Vuex","src_store","Store","config","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MmlEditor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MmlEditor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.c6d9c515.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"451a193e\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/mc2413/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PianoRoll.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PianoRoll.vue?vue&type=style&index=0&lang=scss&\"","import Vue from \"vue\";\n\nimport BootstrapVue from \"bootstrap-vue\";\nimport \"@/assets/bootstrap.scss\";\n//import \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\n\nVue.use(BootstrapVue);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',[_c('b-navbar',{staticClass:\"mb-2\",attrs:{\"type\":\"dark\",\"variant\":\"dark\"}},[_c('b-navbar-brand',[_vm._v(\"MC2413\")]),_c('b-collapse',{attrs:{\"id\":\"nav-collapse\",\"is-nav\":\"\"}},[_c('b-navbar-nav',[_c('b-nav-item',{attrs:{\"to\":\"/\"}},[_vm._v(\"Home\")]),_c('b-nav-item',{attrs:{\"to\":\"/about\"}},[_vm._v(\"About\")])],1)],1)],1)],1),_c('b-container',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Tone from \"tone\";\nimport _ from \"lodash\";\n\nwindow.Tone = Tone;\n\nclass Synth {\n  constructor() {\n    this.tone = {};\n    this.selected_tone = \"a\";\n    this.initSynth();\n  }\n  initSynth() {\n    this.masterChannel = new Tone.Channel({\n      volume: -10\n    }).toMaster();\n\n    this.createChannel(\"a\");\n  }\n  createChannel(name) {\n    const tone = new Tone.Synth({\n      oscillator: {\n        type: \"square\"\n      },\n      envelope: {\n        attack: 0.005,\n        decay: 0.1,\n        sustain: 0.3,\n        release: 0.01\n      },\n      portamento: 0.0\n    });\n    tone.connect(this.masterChannel);\n    tone.name = name;\n    this.tone[name] = tone;\n  }\n  getTone(name) {\n    if (!name) name = this.selected_tone;\n    return this.tone[name];\n  }\n  selectTone(name) {\n    this.selected_tone = name;\n  }\n  noteOn(interval, velocity, time, channel) {\n    this.getTone(channel).triggerAttack(\n      this.normalizeInterval(interval),\n      time,\n      velocity\n    );\n  }\n  noteChange(interval, time, channel) {\n    this.getTone(channel).setNote(this.normalizeInterval(interval), time);\n  }\n  noteOff(time, channel) {\n    this.getTone(channel).triggerRelease(time);\n  }\n  noteOnOff(interval, duration, time, velocity, channel) {\n    this.getTone(channel).triggerAttackRelease(\n      this.normalizeInterval(interval),\n      duration,\n      time,\n      velocity\n    );\n  }\n  connectStore(store) {\n    let test_note = null;\n\n    store.subscribeAction((action, state) => {\n      let type = action.type,\n        payload = action.payload;\n      switch (type) {\n        case \"synth/noteOnTestTone\":\n          if (test_note != payload) {\n            if (test_note === null) {\n              this.noteOn(payload, 0.5);\n            } else {\n              this.noteChange(payload);\n            }\n          }\n          test_note = payload;\n          break;\n        case \"synth/noteOffTestTone\":\n          this.noteOff();\n          test_note = null;\n          break;\n        case \"synth/selectNote\":\n          this.noteOn(payload.interval, 0.5);\n          setTimeout(\n            (() => {\n              this.noteOff();\n            }).bind(this),\n            250\n          );\n          break;\n        default:\n          break;\n      }\n    });\n  }\n  normalizeInterval(interval) {\n    const trans = {\n      \"A+\": \"A#\",\n      \"A-\": \"G#\",\n      \"B+\": \"C\",\n      \"B-\": \"A#\",\n      \"C+\": \"C#\",\n      \"C-\": \"B\",\n      \"D+\": \"D#\",\n      \"D-\": \"C#\",\n      \"E+\": \"F\",\n      \"E-\": \"D#\",\n      \"F+\": \"F#\",\n      \"F-\": \"E\",\n      \"G+\": \"G#\",\n      \"G-\": \"F#\"\n    };\n    let n = interval.toUpperCase().match(/([A-G][#+-]*)(\\d+)/);\n    if (!n) return \"\";\n    let name = n[1];\n    if (trans[n[1]]) name = trans[n[1]];\n    return name + n[2];\n  }\n}\n\nconst transport = Tone.Transport;\n\nconst _beats = (beats, add) => Tone.Time(beats * 192 + (add ? add : 0), \"i\");\n\nclass Sequencer {\n  constructor(synth) {\n    this.synth = synth;\n    transport.PPQ = 192;\n    transport.loop = false;\n  }\n  connectStore(store) {\n    this.store = store;\n    store.subscribeAction((action, state) => {\n      let type = action.type,\n        payload = action.payload;\n      switch (type) {\n        case \"synth/playSequence\":\n          if (transport.state == \"started\") transport.stop(0);\n          this.storeEvent(state);\n          Tone.context.latencyHint = \"playback\";\n          transport.start();\n          break;\n        case \"synth/stopSequence\":\n          transport.stop();\n          Tone.context.latencyHint = \"interactive\";\n          break;\n      }\n    });\n  }\n  storeEvent(state) {\n    transport.cancel();\n    this.indicator = new Tone.Loop(\n      (time => {\n        Tone.Draw.schedule(() => {\n          this.store.dispatch(\n            \"synth/tickSequence\",\n            Tone.Time(transport.position).toTicks() / 192\n          );\n        }, time);\n      }).bind(this),\n      0.05\n    ).start();\n\n    _.forIn(state.synth.sequence, this.processTrack.bind(this));\n  }\n  processTrack(data, name) {\n    this.synth.createChannel(name);\n    let part = new Tone.Part(\n      this.processEvent.bind(this),\n      _.map(data, d => [_beats(d.time), d])\n    ).start();\n    part.loopEnd = Infinity;\n\n    //bpm change(global)\n    data\n      .filter(evt => evt.type == \"bpm\")\n      .forEach(evt => {\n        transport.schedule(time => {\n          transport.bpm.value = evt.bpm;\n        }, _beats(evt.time));\n      });\n    //runtime loop\n    data\n      .filter(evt => evt.type === \"runtime_loop\")\n      .forEach(evt => {\n        part.loop = evt.count === 0 ? true : evt.count;\n        transport.schedule(time => {\n          console.log(\"loop_set\");\n          part.loopStart = _beats(evt.start);\n          part.loopEnd = _beats(evt.end);\n        }, _beats(evt.time, 1)); //notenote\n      });\n    //before note\n    data\n      .filter(evt => evt.type == \"note\" || evt.type == \"pitch\")\n      .forEach(evt => {\n        let before = evt.time - 2;\n        if (before > 2) {\n          Tone.Draw.schedule(() => {\n            this.store.dispatch(\"synth/beforeNoteOn\", evt);\n          }, _beats(before));\n        }\n      });\n  }\n  processEvent(time, evt) {\n    switch (evt.type) {\n      case \"note\":\n      case \"pitch\":\n        console.log(\"note\", evt.interval);\n        this.synth.noteOnOff(\n          evt.interval,\n          _beats(evt.duration),\n          time,\n          evt.velocity,\n          evt.tr\n        );\n        Tone.Draw.schedule(() => {\n          this.store.dispatch(\"synth/noteOn\", evt);\n        }, time);\n        Tone.Draw.schedule(() => {\n          this.store.dispatch(\"synth/noteOff\", evt);\n        }, Tone.Time(Tone.Time(time).toTicks() + evt.duration * 192, \"i\"));\n        break;\n    }\n  }\n}\n\nclass MC2413 {\n  constructor() {\n    this.synth = new Synth();\n    this.sequencer = new Sequencer(this.synth);\n  }\n  connectStore(store) {\n    this.synth.connectStore(store);\n    this.sequencer.connectStore(store);\n  }\n}\n\nexport default MC2413;\nexport { Synth, Sequencer };\n","<template>\n  <div id=\"app\">\n    <div>\n      <b-navbar class=\"mb-2\" type=\"dark\" variant=\"dark\">\n        <b-navbar-brand>MC2413</b-navbar-brand>\n        <b-collapse id=\"nav-collapse\" is-nav>\n          <b-navbar-nav>\n            <b-nav-item to=\"/\">Home</b-nav-item>\n            <b-nav-item to=\"/about\">About</b-nav-item>\n          </b-navbar-nav>\n        </b-collapse>\n      </b-navbar>\n    </div>\n    <b-container>\n      <router-view />\n    </b-container>\n  </div>\n</template>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  /*   color: #2c3e50; */\n}\n#nav {\n  padding: 30px;\n}\n\n#nav a {\n  font-weight: bold;\n  color: #2c3e50;\n}\n\n#nav a.router-link-exact-active {\n  color: #42b983;\n}\n</style>\n\n<script>\nimport MC2413 from \"./lib/mc2413.js\";\n\nlet mc2413 = new MC2413();\n\nexport default {\n  name: \"app\",\n  mounted() {\n    mc2413.connectStore(this.$store);\n  }\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=81718c44&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('b-row',{staticClass:\"mb-2 pianoroll-control\"},[_c('b-col',{attrs:{\"sm\":\"2\"}},[_c('b-button',{staticClass:\"float-left\",attrs:{\"disabled\":\"\"}},[_vm._v(\"\\n        scale:\"+_vm._s(Number(_vm.pianoroll_scale).toFixed(2))+\"\\n      \")])],1),_c('b-col',{attrs:{\"sm\":\"6\"}},[_c('b-form-input',{attrs:{\"type\":\"range\",\"min\":\"0.5\",\"max\":\"4\",\"step\":\"0.25\",\"variant\":\"secondary\"},model:{value:(_vm.pianoroll_scale),callback:function ($$v) {_vm.pianoroll_scale=_vm._n($$v)},expression:\"pianoroll_scale\"}})],1),_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('b-dropdown',{staticClass:\"float-right\",attrs:{\"text\":(\"grid:\" + _vm.pianoroll_quantize)}},_vm._l((_vm.pianoroll_quantize_options),function(o){return _c('b-dropdown-item',{key:o,on:{\"click\":function($event){_vm.pianoroll_quantize = o}}},[_vm._v(_vm._s(o)+\"\\n        \")])}),1)],1)],1),_c('piano-roll',{staticClass:\"piano-roll mb-2\",attrs:{\"scale\":_vm.pianoroll_scale,\"quantize\":_vm.pianoroll_quantize}}),_c('b-row',{staticClass:\"mb-2 tranport\"},[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('b-button-group',{attrs:{\"size\":\"sm\"}},[_c('b-button',{attrs:{\"variant\":\"success\"},on:{\"click\":_vm.playTransport}},[_vm._v(\"Play\")]),_c('b-button',{on:{\"click\":_vm.stopTransport}},[_vm._v(\"Stop\")]),_c('b-button',{attrs:{\"disabled\":\"\"}},[(_vm.transportPlaying)?_c('b-spinner',{attrs:{\"small\":\"\",\"type\":\"grow\"}}):_vm._e(),_vm._v(\"\\n          \"+_vm._s(_vm.transportPositionBars)+\"\\n        \")],1)],1)],1)],1),_c('mml-editor')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('codemirror',{ref:\"cm\",attrs:{\"value\":_vm.mml,\"options\":_vm.cmOptions}}),(_vm.mmlError)?_c('b-alert',{staticClass:\"mt-4\",attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_vm._v(_vm._s(_vm.mmlError.message))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <codemirror ref=\"cm\" :value=\"mml\" :options=\"cmOptions\" />\n    <b-alert class=\"mt-4\" v-if=\"mmlError\" show variant=\"danger\">{{\n      mmlError.message\n    }}</b-alert>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.CodeMirror {\n  text-align: left;\n  border: 1px solid #ccc;\n}\n</style>\n\n<script>\nimport { mapState } from \"vuex\";\nimport _ from \"lodash\";\nimport { codemirror } from \"vue-codemirror\";\nimport \"codemirror/lib/codemirror.css\";\n//import \"codemirror/theme/base16-dark.css\";\nimport \"../assets/mid-school2.less\";\n\nimport \"codemirror/addon/selection/active-line.js\";\nimport \"codemirror/addon/selection/mark-selection.js\";\nimport \"codemirror/addon/lint/lint.js\";\nimport \"codemirror/addon/lint/lint.css\";\n\nimport CM from \"codemirror\";\n\nCM.defineMode(\"mml\", () => {\n  return {\n    token(stream, state) {\n      if (stream.column() == 0 && stream.match(/^[a-z0-9]+/)) {\n        return \"qualifier\";\n      } else if (stream.match(/[a-gr][+#-]*/i)) {\n        return \"operator\";\n      } else if (stream.match(/[\\d^.&]+/)) {\n        return \"number\";\n      } else if (stream.match(/[><tlvqo]/i)) {\n        return \"keyword\";\n      } else if (stream.match(/\\/\\/.*/)) {\n        return \"comment\";\n      } else {\n        stream.next();\n        return null;\n      }\n    }\n  };\n});\n\nlet lastError = null;\nCM.registerHelper(\"lint\", \"mml\", function(text, cm) {\n  const err = lastError;\n  if (err) {\n    const start = new CM.Pos(err.start.line - 1, err.start.column - 1),\n      end = new CM.Pos(err.end.line - 1, err.end.column - 1);\n    return [{ from: start, to: end, message: err.message }];\n  }\n  return [];\n});\n\n// require styles\nexport default {\n  name: \"mml-editor\",\n  components: {\n    codemirror\n  },\n  data() {\n    return {\n      cmOptions: {\n        mode: \"mml\",\n        theme: \"mid-school2\",\n        lineNumbers: true,\n        line: true,\n        lineWrapping: true,\n        styleActiveLine: true,\n        styleSelectedText: true,\n        lint: true,\n        gutters: [\"CodeMirror-lint-markers\"]\n      }\n    };\n  },\n  computed: {\n    codemirror() {\n      return this.$refs.cm.codemirror;\n    },\n    ...mapState(\"synth\", {\n      mml: \"mml\",\n      mmlError: \"mmlError\"\n    })\n  },\n  mounted() {\n    const cm = this.codemirror;\n    this.initCodeMirror(cm);\n    this.$store.subscribe((mutation, state) => {\n      if (mutation.type == \"synth/updateMmlError\") {\n        lastError = mutation.payload;\n      }\n    });\n    this.$store.subscribeAction((action, state) => {\n      const note = action.payload;\n      let start, end;\n      switch (action.type) {\n        case \"synth/playSequence\":\n          this.selections = {};\n          break;\n        case \"synth/selectNote\":\n        case \"synth/noteOn\":\n          this.changeCursorByProc = true;\n          start = new CM.Pos(note.start.line - 1, note.start.column - 1);\n          end = new CM.Pos(note.end.line - 1, note.end.column - 1);\n\n          if (action.type == \"synth/selectNote\") {\n            cm.focus();\n            cm.setCursor(start);\n          } else {\n            this.selections[note.tr] = { anchor: start, head: end };\n            cm.getDoc().setSelections(_.values(this.selections));\n          }\n          break;\n        case \"synth/noteOff\":\n          delete this.selections[note.tr];\n          break;\n      }\n    });\n  },\n  methods: {\n    initCodeMirror(cm) {\n      cm.on(\"change\", (cm, ch) => {\n        this.$store.dispatch(\"synth/changeMML\", cm.getValue());\n      });\n      cm.on(\"cursorActivity\", cm => {\n        if (this.changeCursorByProc) {\n          this.changeCursorByProc = false;\n          return;\n        }\n        const cursor = cm.getCursor();\n        this.$store.dispatch(\"synth/changeCursorMML\", {\n          line: cursor.line + 1,\n          column: cursor.ch + 1\n        });\n      });\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MmlEditor.vue?vue&type=template&id=0ca96ae4&\"\nimport script from \"./MmlEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MmlEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MmlEditor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrapper\",attrs:{\"ondragstart\":\"return false;\",\"ondrop\":\"return false;\"}},[_c('svg',[_c('defs',[_c('pattern',{attrs:{\"id\":\"ptn-grid\",\"width\":_vm.quantize_width * _vm.quantize,\"height\":\"112\",\"patternUnits\":\"userSpaceOnUse\",\"patternContentUnits\":\"userSpaceOnUse\",\"x\":32 + _vm.grid_offset}},_vm._l((_vm.util.range(_vm.quantize)),function(b){return _c('g',{key:b,attrs:{\"transform\":_vm.getTransform(b * _vm.quantize_width, 0)}},[_c('rect',{staticClass:\"a\",attrs:{\"y\":\"0\",\"width\":_vm.quantize_width,\"height\":\"112\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"10\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"28\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"46\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"74\",\"width\":_vm.quantize_width,\"height\":\"10\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"94\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('line',{class:_vm.getLineClass(b, _vm.quantize),attrs:{\"x1\":\"0\",\"y1\":\"0\",\"x2\":\"0\",\"y2\":\"112\"}}),_c('line',{staticClass:\"d\",attrs:{\"x1\":\"0\",\"y1\":\"0\",\"x2\":_vm.quantize_width,\"y2\":\"0\"}}),_c('line',{staticClass:\"c\",attrs:{\"x1\":\"0\",\"y1\":\"64\",\"x2\":_vm.quantize_width,\"y2\":\"64\"}})])}),0)]),_c('g',{ref:\"stage\",attrs:{\"transform\":_vm.getTransform(0, _vm.stage_pos.y * -1, _vm.scale)}},[_c('rect',{attrs:{\"x\":\"32\",\"width\":_vm.stage_width,\"height\":_vm.octaves * 112,\"fill\":\"url(#ptn-grid)\"},on:{\"mousedown\":function($event){return _vm.onDrag('start', $event)},\"mouseup\":function($event){return _vm.onDrag('end', $event)},\"mousemove\":function($event){return _vm.onDrag('move', $event)},\"wheel\":function($event){$event.preventDefault();return _vm.onDrag('wheel', $event)}}}),_c('g',{ref:\"note\",attrs:{\"id\":\"note\",\"transform\":_vm.getTransform(_vm.stage_pos.x * -1, 0)}},_vm._l((_vm.note),function(n){return _c('g',{key:n.id,attrs:{\"transform\":_vm.getTransform(_vm.getXfromTime(n.time) + 32, _vm.getYfromNote(n.interval))},on:{\"click\":function($event){return _vm.onClickNote($event, n)}}},[_c('rect',{staticClass:\"note\",attrs:{\"width\":_vm.getXfromTime(n.duration),\"height\":_vm.getHeightfromNote(n.interval),\"fill\":_vm.getNoteColor(n, n.selected),\"stroke\":_vm.getNoteColor(n, true)}}),(_vm.scale >= 2.0)?_c('text',{attrs:{\"transform\":\"translate(2 6.5)\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.getNoteName(n.interval))+\"\\n          \")]):_vm._e()])}),0),(_vm.cursorX)?_c('rect',{ref:\"cursor\",staticClass:\"cursor trans\",attrs:{\"transform\":_vm.getTransform(_vm.stage_pos.x * -1, 0),\"x\":_vm.cursorX + 32,\"width\":Math.max(2, 4 / _vm.scale),\"height\":_vm.octaves * 112}}):_vm._e(),_c('g',{ref:\"piano\",attrs:{\"id\":\"piano\"}},_vm._l((_vm.util.range(_vm.octaves)),function(o){return _c('g',{key:(\"key-\" + o),attrs:{\"transform\":_vm.getTransform(0, (9 - o) * 112),\"data-octave\":o},on:{\"mousedown\":function($event){return _vm.onKeyboard('down', $event)},\"mousemove\":function($event){return _vm.onKeyboard('move', $event)},\"mouseup\":function($event){return _vm.onKeyboard('up', $event)},\"mouseout\":function($event){return _vm.onKeyboard('out', $event)}}},[_c('rect',{staticClass:\"a\",attrs:{\"y\":\"96\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"c\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"80\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"d\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"64\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"e\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"48\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"f\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"32\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"g\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"16\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"a\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"0\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"b\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"94\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"c#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"74\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"d#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"46\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"f#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"28\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"g#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"10\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"a#\"}}),_c('text',{staticClass:\"c\",attrs:{\"transform\":\"translate(22 108)\"}},[_vm._v(\"C\"+_vm._s(o))])])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapGetters } from \"vuex\";\nimport Color from \"color\";\nimport _ from \"lodash\";\n\nconst NOTE_MAP = {\n  C: { y: 103, height: 9 },\n  D: { y: 84, height: 10 },\n  E: { y: 64, height: 10 },\n  F: { y: 55, height: 9 },\n  G: { y: 37, height: 9 },\n  A: { y: 19, height: 9 },\n  B: { y: 0, height: 10 },\n  \"C#\": { y: 94, height: 9 },\n  \"D#\": { y: 74, height: 10 },\n  \"F#\": { y: 46, height: 9 },\n  \"G#\": { y: 28, height: 9 },\n  \"A#\": { y: 10, height: 9 }\n};\n\nconst NOTE_COLOR_MIN = \"#2283e5\";\nconst NOTE_COLOR_MID = \"#855181\";\nconst NOTE_COLOR_MAX = \"#e42222\";\n\nexport default {\n  name: \"piano-roll\",\n  props: {\n    scale: {\n      type: Number,\n      default: 2.0\n    },\n    quantize: {\n      type: Number,\n      default: 8\n    },\n    x: {\n      type: Number,\n      default: 0\n    },\n    y: {\n      type: String,\n      default: \"b4\"\n    }\n  },\n  data() {\n    return {\n      util: _,\n      octaves: 10,\n      stage_pos: {\n        x: 0,\n        y: 0\n      },\n      stage_width: 10000,\n      last_pos: null,\n      selection: null,\n      cursorX: null\n    };\n  },\n  mounted() {\n    window.addEventListener(\"resize\", this.updateStageWidth);\n    this.updateStageWidth();\n\n    this.setStagePos(\n      this.x * this.scale,\n      this.getYfromNote(this.y) * this.scale\n    );\n\n    this.$store.subscribeAction((action, state) => {\n      let timer = null;\n      if (action.type == \"synth/tickSequence\") {\n        const time = action.payload;\n        let x = this.getXfromTime(time);\n        this.cursorX = x;\n        const cx = this.stage_width / 2;\n        if (x > this.stage_pos.x + cx || x < this.stage_pos.x) {\n          this.setStagePos(x - cx, this.stage_pos.y);\n        }\n      }\n      if (action.type == \"synth/beforeNoteOn\") {\n        const note = action.payload;\n        this.setCenterInterval(note.interval);\n      }\n      if (action.type == \"synth/noteOn\") {\n        const note = action.payload;\n        this.flushKeyboard(true, note);\n      }\n      if (action.type == \"synth/noteOff\") {\n        const note = action.payload;\n        this.flushKeyboard(false, note, 100);\n      }\n      if (action.type == \"synth/changeCursorMML\") {\n        const pos = action.payload;\n        let note = null,\n          last = { line: 1, column: 1 };\n        this.note.some(n => {\n          if (\n            n.start.line == pos.line &&\n            n.start.column <= pos.column &&\n            n.end.column > pos.column\n          ) {\n            note = n;\n            return true;\n          }\n        });\n        if (note) {\n          this.setCenterInterval(note.interval, note.time);\n          this.cursorX = this.getXfromTime(note.time);\n        }\n      }\n    });\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"resize\", this.updateStageWidth);\n  },\n  computed: {\n    quantize_width() {\n      return (16 * 16) / this.quantize;\n    },\n    grid_offset() {\n      return (this.stage_pos.x % (this.quantize_width * this.quantize)) * -1;\n    },\n    ...mapGetters(\"synth\", {\n      note: \"noteSequence\"\n    })\n  },\n  watch: {\n    scale(newVal, oldVal) {\n      this.stage_pos.x *= newVal / oldVal;\n      this.stage_pos.y *= newVal / oldVal;\n      this.updateStageWidth();\n    }\n  },\n  methods: {\n    getTransform(x, y, scale) {\n      let s = \"\";\n      if (x !== null && y !== null) s += `translate(${x},${y})`;\n      if (scale) s += ` scale(${scale})`;\n      return s;\n    },\n    getLineClass(b, quantize) {\n      if (b == 0) return \"measure\";\n      return b % (quantize / 4) == 0 ? \"beat\" : \"tick\";\n    },\n    onDrag(type, e) {\n      switch (type) {\n        case \"start\":\n          this.last_pos = {\n            x: e.offsetX,\n            y: e.offsetY\n          };\n          break;\n        case \"move\":\n          if (!e.buttons) this.last_pos = null;\n          if (this.last_pos !== null) {\n            this.setStagePos(\n              this.stage_pos.x + (this.last_pos.x - e.offsetX) / this.scale,\n              this.stage_pos.y + (this.last_pos.y - e.offsetY) / this.scale\n            );\n            this.last_pos = {\n              x: e.offsetX,\n              y: e.offsetY\n            };\n          }\n          break;\n        case \"end\":\n          this.last_pos = null;\n          break;\n        case \"wheel\":\n          this.setStagePos(\n            this.stage_pos.x,\n            this.stage_pos.y + e.deltaY / 2.0 / this.scale\n          );\n          break;\n      }\n    },\n    onKeyboard(type, e) {\n      let note = e.target.dataset.note + e.target.parentNode.dataset.octave;\n      switch (type) {\n        case \"down\":\n          this.$store.dispatch(\"synth/noteOnTestTone\", note);\n          break;\n        case \"up\":\n          this.$store.dispatch(\"synth/noteOffTestTone\");\n          break;\n        case \"move\":\n          if (e.buttons) {\n            this.$store.dispatch(\"synth/noteOnTestTone\", note);\n          }\n          break;\n        case \"out\":\n          this.$store.dispatch(\"synth/noteOffTestTone\");\n          break;\n      }\n    },\n    updateStageWidth() {\n      this.stage_width = this.$refs.wrapper.offsetWidth / this.scale;\n    },\n    setStagePos(x, y) {\n      this.stage_pos.x = Math.max(0, x);\n      this.stage_pos.y = Math.min(\n        Math.max(0, y),\n        112 * 10 * this.scale - this.$refs.wrapper.offsetHeight\n      );\n    },\n    normalizeNote(note) {\n      const trans = {\n        \"A+\": \"A#\",\n        \"A-\": \"G#\",\n        \"B+\": \"C\",\n        \"B-\": \"A#\",\n        \"C+\": \"C#\",\n        \"C-\": \"B\",\n        \"D+\": \"D#\",\n        \"D-\": \"C#\",\n        \"E#\": \"F\",\n        \"E+\": \"F\",\n        \"E-\": \"D#\",\n        \"F+\": \"F#\",\n        \"F-\": \"E\",\n        \"G+\": \"G#\",\n        \"G-\": \"F#\"\n      };\n      let n = note.toUpperCase().match(/([A-G][#+-]*)(\\d+)/);\n      if (!n) return null;\n      let name = n[1];\n      if (trans[n[1]]) name = trans[n[1]];\n      return {\n        name: name,\n        org_name: n[1].toUpperCase(),\n        octave: n[2]\n      };\n    },\n    getNoteName(note) {\n      const n = this.normalizeNote(note);\n      if (!n) return \"\";\n      return n.org_name;\n    },\n    getYfromNote(note) {\n      const n = this.normalizeNote(note);\n      if (!n) return 0;\n      return 112 * (9 - n.octave) + NOTE_MAP[n.name].y;\n    },\n    getHeightfromNote(note) {\n      const n = this.normalizeNote(note);\n      return NOTE_MAP[n.name].height;\n    },\n    getXfromTime(len) {\n      return len * 16 * 4;\n    },\n    getNoteColor(note, active) {\n      const v = note.velocity;\n      let color;\n      if (v > 0.5) {\n        color = Color(NOTE_COLOR_MID);\n        color = color.mix(Color(NOTE_COLOR_MAX), (v - 0.5) * 2);\n      } else {\n        color = Color(NOTE_COLOR_MIN);\n        color = color.mix(Color(NOTE_COLOR_MID), v * 2);\n      }\n      return active\n        ? color\n            .lighten(0.5)\n            .rgb()\n            .string()\n        : color.rgb().string();\n    },\n    //bad function\n    flushKeyboard(on, note, delay) {\n      const nn = this.normalizeNote(note.interval);\n      const name = nn.name.toLowerCase(),\n        octave = nn.octave;\n\n      const dom = this.$refs.piano.querySelector(\n        `g[data-octave=\"${octave}\"] rect[data-note=\"${name}\"]`\n      );\n      if (dom) {\n        const fn = () => {\n          if (on) {\n            dom.classList.add(\"active\");\n          } else {\n            dom.classList.remove(\"active\");\n          }\n        };\n        if (delay) {\n          _.delay(fn, delay);\n        } else {\n          fn();\n        }\n      }\n    },\n    onClickNote(evt, note) {\n      if (this.selection) {\n        this.$set(this.selection, \"selected\", false);\n      }\n      this.$set(note, \"selected\", true);\n      this.setCenterInterval(note.interval, note.time);\n      this.cursorX = this.getXfromTime(note.time);\n      this.selection = note;\n      this.$store.dispatch(\"synth/selectNote\", note);\n    },\n    setCenterInterval(interval, time) {\n      let y = this.getYfromNote(interval) * this.scale,\n        x =\n          this.getXfromTime(time) -\n          this.$refs.wrapper.offsetWidth / 2 / this.scale;\n      if (x < 0) x = 0;\n      let ydir = null;\n      if (y < this.stage_pos.y) ydir = \"up\";\n      if (y > this.stage_pos.y + this.$refs.wrapper.offsetHeight) ydir = \"down\";\n\n      if (ydir || x != this.stage_pos.x) {\n        if (this.timer) clearTimeout(this.timer);\n        this.$refs.stage.classList.add(\"trans\");\n        this.setStagePos(\n          time ? x : this.stage_pos.x,\n          ydir\n            ? ydir == \"up\"\n              ? y\n              : y - this.$refs.wrapper.offsetHeight\n            : this.stage_pos.y\n        );\n        this.timer = _.delay(() => {\n          this.$refs.stage.classList.remove(\"trans\");\n        }, 500);\n      }\n    }\n  }\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!./PianoRoll.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!./PianoRoll.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PianoRoll.vue?vue&type=template&id=7acc827e&\"\nimport script from \"./PianoRoll.js?vue&type=script&lang=js&\"\nexport * from \"./PianoRoll.js?vue&type=script&lang=js&\"\nimport style0 from \"./PianoRoll.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home\">\n    <b-row class=\"mb-2 pianoroll-control\">\n      <b-col sm=\"2\">\n        <b-button disabled class=\"float-left\">\n          scale:{{ Number(pianoroll_scale).toFixed(2) }}\n        </b-button>\n      </b-col>\n      <b-col sm=\"6\">\n        <b-form-input\n          type=\"range\"\n          v-model.number=\"pianoroll_scale\"\n          min=\"0.5\"\n          max=\"4\"\n          step=\"0.25\"\n          variant=\"secondary\"\n        />\n      </b-col>\n      <b-col sm=\"3\">\n        <b-dropdown :text=\"`grid:${pianoroll_quantize}`\" class=\"float-right\">\n          <b-dropdown-item\n            v-for=\"o in pianoroll_quantize_options\"\n            :key=\"o\"\n            @click=\"pianoroll_quantize = o\"\n            >{{ o }}\n          </b-dropdown-item>\n        </b-dropdown>\n      </b-col>\n    </b-row>\n    <piano-roll\n      class=\"piano-roll mb-2\"\n      :scale=\"pianoroll_scale\"\n      :quantize=\"pianoroll_quantize\"\n    />\n    <b-row class=\"mb-2 tranport\">\n      <b-col sm=\"12\">\n        <b-button-group size=\"sm\">\n          <b-button variant=\"success\" @click=\"playTransport\">Play</b-button>\n          <b-button @click=\"stopTransport\">Stop</b-button>\n          <b-button disabled>\n            <b-spinner small type=\"grow\" v-if=\"transportPlaying\"></b-spinner>\n            {{ transportPositionBars }}\n          </b-button>\n        </b-button-group>\n      </b-col>\n    </b-row>\n\n    <mml-editor />\n  </div>\n</template>\n\n<style lang=\"scss\">\n.home {\n  text-align: left;\n  .pianoroll-control {\n    height: 48px;\n    & > div:nth-child(2) {\n      padding-top: 6px;\n    }\n  }\n  .piano-roll {\n    height: 350px;\n  }\n  .tranport button {\n    min-width: 6em;\n  }\n}\n</style>\n<script>\n// @ is an alias to /src\nimport MmlEditor from \"@/components/MmlEditor.vue\";\nimport PianoRoll from \"@/components/PianoRoll.vue\";\n\nimport StartAudioContext from \"startaudiocontext\";\nimport { mapState } from \"vuex\";\n\nimport _ from \"lodash\";\n\n// require styles\nexport default {\n  name: \"home\",\n  components: {\n    MmlEditor,\n    PianoRoll\n  },\n  data() {\n    return {\n      pianoroll_scale: 1.0,\n      pianoroll_quantize: 16,\n      pianoroll_quantize_options: [32, 24, 16, 12, 9, 8, 4, 3, 2, 1],\n      transportPosition: 0\n    };\n  },\n  computed: {\n    transportPositionBars() {\n      let m = _.padStart(Math.floor(this.transportPosition / 4), 3, \"0\"),\n        b = Math.floor(this.transportPosition % 4),\n        s = _.padStart(Math.floor((this.transportPosition % 1) * 16), 2, \"0\");\n      return `${m}:${b}:${s}`;\n    },\n    ...mapState(\"synth\", {\n      transportPlaying: \"transportPlaying\"\n    })\n  },\n  mounted() {\n    this.$store.subscribeAction((action, state) => {\n      if (action.type == \"synth/tickSequence\") {\n        this.transportPosition = action.payload;\n      }\n    });\n  },\n  methods: {\n    playTransport() {\n      this.$store.dispatch(\"synth/playSequence\");\n    },\n    stopTransport() {\n      this.$store.dispatch(\"synth/stopSequence\");\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=33b5fe19&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport Home from \"./views/Home.vue\";\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: \"/\",\n      name: \"home\",\n      component: Home\n    },\n    {\n      path: \"/about\",\n      name: \"about\",\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () =>\n        import(/* webpackChunkName: \"about\" */ \"./views/About.vue\")\n    }\n  ]\n});\n","import P from \"parsimmon\";\nimport _ from \"lodash\";\n\nfunction isEmpty(x) {\n  if (x.name && x.name == \"empty\") return true;\n  if (x.value) {\n    let v = x.value;\n    if (v.hasOwnProperty(\"length\") && v.length == 0) return true;\n  }\n  return x ? false : true;\n}\n\n//\nconst space = P.regexp(/[ \\t]*/).node(\"empty\"); // \"empty\" nodes may be ignored..\nconst space_exists = P.regexp(/[ \\t]+/).node(\"empty\");\n//\nconst number = P.regexp(/\\d+/).map(a => {\n  return parseInt(a);\n});\n//\nconst empty = P.of(\"\").node(\"empty\");\n\n//\nconst interval = P.regexp(/[a-g][#+-]?/i)\n  .map(s => {\n    return s.toLowerCase();\n  })\n  .node(\"interval\")\n  .desc(\"note\");\n//\nconst rest = P.regexp(/r/i)\n  .node(\"rest\")\n  .desc(\"R\");\n\n//\nconst length = P.alt(number, P.regexp(/[.^+\\-\\\\]/))\n  .many()\n  .node(\"length\")\n  .desc(\"length\");\n\n//\nconst slur = P.string(\"&\").node(\"slur\");\n\n//()\nconst withLength = P.seq(\n  P.alt(interval, rest),\n  length.or(empty).skip(space), //optional\n  slur.or(empty).skip(space) //optional\n);\n\n// ex)L8 L4. L4&16\nconst setLength = P.seq(\n  P.alt(\n    P.regexp(/l/i)\n      .map(s => s.toLowerCase())\n      .node(\"length_set\")\n      .desc(\"L\")\n  ),\n  length\n);\n\nconst withAmount = P.seq(\n  P.alt(\n    P.regexp(/o/i)\n      .node(\"octave_set\")\n      .desc(\"O\"),\n    P.regexp(/q/i)\n      .node(\"quantize_set\")\n      .desc(\"Q\"),\n    P.regexp(/t/i)\n      .node(\"bpm_set\")\n      .desc(\"T\"),\n    P.regexp(/v/i)\n      .node(\"velocity_set\")\n      .desc(\"V\")\n  ),\n  number.node(\"amount\")\n).desc(\"number\");\n\nconst command = P.alt(\n  P.string(\">\").node(\"octave_shift\"),\n  P.string(\"<\").node(\"octave_shift\")\n);\n\nconst comment = P.seqMap(P.string(\"//\"), P.regexp(/.*/), (a, b) => \"\");\n\nconst loop_start = P.string(\"[\").node(\"loop_start\");\nconst loop_end = P.seqMap(P.string(\"]\"), number.or(empty), (cl, count) => {\n  if (count.name == \"empty\") return 2;\n  return count;\n}).node(\"loop_end\");\n\nconst mml = P.alt(\n  withLength,\n  setLength,\n  withAmount,\n  command,\n  loop_start,\n  loop_end,\n  comment,\n  space_exists\n)\n  .skip(space)\n  .many()\n  .map(r => {\n    return r.flat().filter(x => {\n      return !isEmpty(x);\n    });\n  });\n\nconst loop = P.seqMap(\n  P.string(\"[\"),\n  mml,\n  P.string(\"]\"),\n  number,\n  (s, mml, e, count) => {\n    return {\n      count: parseInt(count),\n      mml: mml\n    };\n  }\n).node(\"loop\");\n\nconst mmlAndLoop = P.alt(mml, loop);\n\nconst track = P.seqMap(\n  P.regexp(/[a-z0-9]/i).many(),\n  space_exists,\n  mml,\n  (tr, sp, mml) => {\n    return {\n      target: tr.map(a => a.toLowerCase()),\n      mml: mml\n    };\n  }\n)\n  .node(\"track\")\n  .desc(\"track\");\n\nconst MmlParser = P.alt(comment, track, space)\n  .sepBy(P.newline)\n  .map(r => {\n    return r.filter(x => {\n      return !isEmpty(x);\n    });\n  });\n\nexport default MmlParser;\n","import MmlParser from \"./parser.js\";\nimport _ from \"lodash\";\n\nconst triggerError = (message, start, end) => {\n  const err = new SyntaxError(message);\n  err.start = _.clone(start);\n  if (end) {\n    err.end = _.clone(end);\n  } else {\n    err.end = {\n      line: start.line,\n      column: start.column + 1\n    };\n  }\n  throw err;\n};\n\nconst limit = (min, max, value) => {\n  return Math.max(min, Math.min(max, value));\n};\n\nclass TokenScanner {\n  constructor(token) {\n    this.token = token;\n    this.index = 0;\n  }\n  hasNext() {\n    return this.index < this.token.length;\n  }\n  peek() {\n    return this.token[this.index] || null;\n  }\n  prev() {\n    return this.index > 0 ? this.token[this.index - 1] || null : null;\n  }\n  next() {\n    return this.token[this.index++];\n  }\n  match(name) {\n    let c = this.peek();\n    return c && c.name === name;\n  }\n  expect(name) {\n    let c = this.peek();\n    if (c && c.name == name) {\n      return this.next();\n    }\n    triggerError(`compile error: Expected ${name}`, c.start, c.end);\n  }\n  setIndex(index) {\n    this.index = index;\n  }\n  getIndex() {\n    return this.index;\n  }\n}\n\nclass MmlCompiler {\n  constructor() {\n    this.defaultParams = {\n      octave: 4,\n      length: 1.0,\n      velocity: 8 / 15,\n      quantize: 1.0\n    };\n  }\n  clear() {\n    this.index = 1;\n    this.tracks = {};\n  }\n  getTrack(name) {\n    return this.tracks[name];\n  }\n  createTrack(name) {\n    this.tracks[name] = _.merge(\n      {\n        time: 0,\n        token: [],\n        data: [],\n        name\n      },\n      this.defaultParams\n    );\n    return this.tracks[name];\n  }\n  getData() {\n    return _.mapValues(this.tracks, tr => tr.data);\n  }\n  compile(src) {\n    this.clear();\n    const ast = MmlParser.parse(src);\n    if (ast.status === false) {\n      const expected = ast.expected.join(\" or \");\n      triggerError(\n        `parse error: expected ${expected}`,\n        {\n          line: ast.index.line,\n          column: ast.index.column\n        },\n        {\n          line: ast.index.line,\n          column: src.split(/\\n/)[ast.index.line].length\n        }\n      );\n    }\n    ast.value.forEach(n => {\n      if (n.name == \"track\") {\n        n.value.target.forEach(name => {\n          let track = this.getTrack(name);\n          if (!track) track = this.createTrack(name);\n          track.token = _.concat(track.token, n.value.mml);\n        });\n      }\n    });\n    _.forIn(this.tracks, (track, name) => {\n      this.compileMml(track);\n    });\n    return this.getData();\n  }\n  compileMml(track) {\n    const token = track.token;\n    let is_slur = false;\n    const calcDuration = (length, quantize) => {\n      return length * quantize;\n    };\n    const calcLength = node => {\n      const len = node.value;\n      let length = 0,\n        last_ln = null,\n        is_tie = false,\n        tie = 1;\n      len.forEach(ln => {\n        if (is_tie && !String(ln).match(/^\\d+$/)) {\n          last_ln = track.length;\n          length += last_ln * tie;\n        }\n        switch (ln) {\n          case 0:\n            break;\n          case \"+\":\n          case \"^\":\n            tie = 1;\n            is_tie = true;\n            break;\n          case \"\\\\\":\n          case \"-\":\n            tie = -1;\n            is_tie = true;\n            break;\n          case \".\":\n            last_ln = last_ln / 2;\n            length += last_ln * tie;\n            is_tie = false;\n            break;\n          default:\n            last_ln = 4 / ln;\n            length += last_ln * tie;\n            is_tie = false;\n            break;\n        }\n      });\n      if (is_tie) {\n        length += track.length * tie;\n      }\n      if (length <= 0) {\n        triggerError(`compile error: Invalid length`, node.start, node.end);\n      }\n      return length;\n    };\n    const push = event => {\n      track.data.push(\n        _.merge(\n          {\n            id: this.index++,\n            tr: track.name\n          },\n          event\n        )\n      );\n    };\n\n    const scanner = new TokenScanner(token);\n\n    const loop_stack = [];\n    while (scanner.hasNext()) {\n      const s = scanner;\n      const c = s.next();\n      let ln, peek;\n      switch (c.name) {\n        case \"interval\":\n          ln = s.match(\"length\") ? calcLength(s.next()) : track.length;\n          push({\n            type: is_slur ? \"pitch\" : \"note\",\n            interval: String(c.value) + String(track.octave),\n            time: track.time,\n            duration: s.match(\"slur\") ? ln : calcDuration(ln, track.quantize),\n            velocity: track.velocity,\n            start: c.start,\n            end: s.prev().end\n          });\n          track.time += ln;\n          is_slur = false;\n          break;\n        case \"rest\":\n          ln = s.match(\"length\") ? calcLength(s.next()) : track.length;\n          track.time += ln;\n          break;\n        case \"octave_set\":\n          track.octave = limit(0, 9, s.expect(\"amount\").value);\n          break;\n        case \"octave_shift\":\n          track.octave += c.value == \">\" ? 1 : -1;\n          track.octave = limit(0, 8, track.octave);\n          break;\n        case \"length_set\":\n          track.length = calcLength(s.expect(\"length\"));\n          break;\n        case \"velocity_set\":\n          track.velocity = limit(0, 1, s.expect(\"amount\").value / 15);\n          break;\n        case \"quantize_set\":\n          track.quantize = limit(0, 1, s.expect(\"amount\").value / 8);\n          break;\n        case \"slur\":\n          is_slur = true;\n          break;\n        case \"bpm_set\":\n          push({\n            type: \"bpm\",\n            time: track.time,\n            bpm: limit(1, 600, s.expect(\"amount\").value),\n            start: c.start,\n            end: s.prev().end\n          });\n          break;\n        case \"loop_start\":\n          loop_stack.push({\n            index: s.getIndex(),\n            count: null,\n            time: track.time\n          });\n          break;\n        case \"loop_end\":\n          if (loop_stack.length == 0) {\n            triggerError(`compileError: missing \"[\"`, c.start, c.end);\n          }\n          peek = loop_stack[loop_stack.length - 1];\n          if (peek.count === null) {\n            if (c.value === 0) {\n              push({\n                type: \"runtime_loop\",\n                count: c.value,\n                time: peek.time,\n                start: peek.time,\n                end: track.time\n              });\n            }\n            peek.count = c.value;\n          }\n          peek.count--;\n          if (peek.count > 0) {\n            s.setIndex(peek.index);\n          } else {\n            loop_stack.pop();\n          }\n          break;\n      }\n    }\n  }\n}\n\nexport default new MmlCompiler();\n","import { MmlCompiler as compiler } from \"../lib/mml\";\nimport _ from \"lodash\";\n\nconst compileMML = src => compiler.compile(src);\n\nlet initialMML = `//J.S.Bach Invention No.13\na T90 V15\nb V6 R12\nc O3V5\nabc L16 REA>C<BEB>DC8E8<G+8>E8 <AEA>C <BEB>DC8<A8R4R\nabc >ECE<A>C<EGF8A8>D8F8. D<B>D<GBDFE8G8>C8E8. C<A>C<F8>D8. <BGBE8>C8. <AFAD8B8>C4R4\nabc <RG>CED<G>DFE8G8<B8>G8 C<G>CED<G>DFE8C8G8E8 >C<AEACE<A>CD8F+8A8>C8< BGDG<B>D<GB>C8E8G8B8\nabc AF+D+F+<B>D<F+AG8>G8.ECE<A8>F+8.D<B>D<G8>E8.C<A>C<F+>GF+ED+F+<B>D+E4R4\nabc <<E2L16 <A8>A4G+8AEA>C<BEB>DC8<A8G+8E8AEA>C<BEB>\nabc DC8<A8>C8<A8>D<AFADF<A>C<B8>D8G8B8.\nabc GEGCE<GBA8>C8DF<B>D<G8B8>CE<A>C<F8D8G>GFGCG>CED<G>\nabc DFE8C8<B8G8>C<G>GED<G>DFE8C8R4RGEGCE<GBA8>C8E8G8\nabc F+ADF+<A>D<F+AG8B8>D8F+8EGCE<G>C<EGF+8A8B8>D+8RECE<A>\nabc CEGF+D<B>D<GB>DF+EC<A>C<F+A>C8.<B>C<AB8<B8>E>E<BGE<BGBE2`;\n\ninitialMML = `// FF3 Theme\n\n// Intro\n\nt t136 L1\na o5L4v15\nb o4L8v11\nc o3L2v13\n\nt rrrr\na g+d+ef+ g2f+e e1 d+2...r16\nb b2g4ab> c4<b4a4g4 f+2ef+ga b4f+ga4d+4\nc ec <a>d< b>f+ b<b>>\n\nt rrrr\na c2e2 d+2^8.r16<b> e2g2 f+2...r16\nb e4ede4g4 f+4f+ef+2 >c4<cdef+gab4f+4d+4<b4>\nc L8 c4<cdef+ga brf+rd+r<br> erede4c4 f+rf+ef+2\n\nt rrr t126 r4 t118 r4 t112 r4 t96 r4\na e2g2 f+2^8.r16d+4 a2>c2< bag+f+\nb g2e4g4 <b4b>c+d+2 e4f+4g4e4 d+4c+4<b4a4\nc cdef+g4f+e d+ef+ga4b4> L2 c<a f+<b\n\n// Theme\n\nt t144\na o4L4v15\nb o3L4v11\nc o3L2v13\n\nabc [\n\na b>ef+<b> a2g+f+ ed+8e8f+ee2d+2 c+f+g+c+ b2ag+ f+f8g+8f+c+ g+2f+2<\nb b2.>c+8d+8ec+d+f+ c+d+8e8f+g+8a+8 bf+d+<b> f+2ff+8g+8 af+fb a2a+2 b2a2<\nc ed+ c+<b aa+ b1> ag+ f+f f+e d+<b>\n\na b>ef+<b> a2g+f+ ed+8e8f+ee2d+2 c+f+g+c+ b2ag+ f+f8g+8f+c+ g+2f+f+16g+16a16b16>\nb b2.>c+8d+8ec+d+f+ c+d+8e8f+g+8a+8 bf+d+<b> f+2ff+8g+8 af+fb a2a+2 b2a2\nc ed+ c+c c+<a+ b1> ag+ f+f f+e d+<b>\n\n//a >>\n//b >\n//c\n\n// a c+2.^-8r8c+< b2.^-8r8g+ aa8g+8f+f f+g+ab>\na c+2^8r8c+< b2^8r8g+ aa8g+8f+f f+g+ab>\nb L8 e4ag+a4e4 e4bag+f+eg+> d<af+4g+c+d+f f+4<b>c+def+4\nc L8 ar<ab>c+d+ef+ g+rg+f+g+rer f+4d4c+4bg+ f+4e4d4c+4<\n\na d2^8r8d c+2^8r8<a bb8>c8<bb8>c8< bag+f+<\nb g2^gab a2^agf+ e4edcde4 d+2e4f+4<\nc br>babrgr f+r>c+r<ar<ab> cr>cr<ef+g4 f+4d+4<b4a4>\n\nb L4\nc L2\n\nabc ]0\n`;\n\n// initialMML = `\n// a L8 cdefgab>[cdefgab>c<bagfed]0\n// `;\n\nexport default {\n  namespaced: true,\n  state: {\n    mml: initialMML,\n    mmlError: null,\n    sequence: compileMML(initialMML),\n    transportPlaying: false\n  },\n  getters: {\n    noteSequence: state => {\n      return _.flatten(\n        _.map(state.sequence, data =>\n          data.filter(evt => {\n            return evt.type == \"note\" || evt.type == \"pitch\";\n          })\n        )\n      );\n    }\n  },\n  mutations: {\n    updateSequence(state, sequence) {\n      state.sequence = sequence;\n    },\n    updateMml: (state, mml) => {\n      state.mml = mml;\n    },\n    updateMmlError: (state, error) => {\n      state.mmlError = error;\n    },\n    updateTransportPlaying: (state, isPlaying) => {\n      state.transportPlaying = isPlaying;\n    }\n  },\n  actions: {\n    noteOnTestTone(context, note) {},\n    noteOffTestTone(context) {},\n    changeMML(context, text) {\n      context.commit(\"updateMml\", text);\n      try {\n        context.commit(\"updateSequence\", compileMML(text));\n        context.commit(\"updateMmlError\", null);\n      } catch (e) {\n        context.dispatch(\"errorMML\", e);\n      }\n    },\n    changeCursorMML(context, pos) {},\n    errorMML(context, e) {\n      console.error(e.toString());\n      context.commit(\"updateMmlError\", e);\n    },\n    changePianoRoll(context, sequence) {\n      context.commit(\"updateSequence\", sequence);\n    },\n    playSequence(context) {\n      context.commit(\"updateTransportPlaying\", true);\n    },\n    stopSequence(context) {\n      context.commit(\"updateTransportPlaying\", false);\n    },\n    tickSequence(context, position) {},\n    beforeNoteOn(context, evt) {},\n    noteOn(context, evt) {},\n    noteOff(context, evt) {},\n    selectNote(context, note) {}\n  }\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\n//modules\nimport synth from \"./store/synth.js\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: { synth }\n});\n","import \"@babel/polyfill\";\nimport \"mutationobserver-shim\";\nimport Vue from \"vue\";\nimport \"./plugins/bootstrap-vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount(\"#app\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}