{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?de97","webpack:///./src/views/Home.vue?91e4","webpack:///./src/components/PianoRoll.vue?7100","webpack:///./src/plugins/bootstrap-vue.js","webpack:///./src/App.vue?5f81","webpack:///./src/lib/engine/hasParamsMixin.js","webpack:///./src/lib/engine/Synth_2a03.js","webpack:///./src/lib/engine/Synth_experimental.js","webpack:///./src/lib/engine/SynthController.js","webpack:///./src/lib/engine.js","webpack:///./examples/ff3.mml","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?88f6","webpack:///./src/components/MmlEditor.vue?2170","webpack:///src/components/MmlEditor.vue","webpack:///./src/components/MmlEditor.vue?b17e","webpack:///./src/components/MmlEditor.vue","webpack:///./src/components/PianoRoll.vue?bdfe","webpack:///./src/components/PianoRoll.js","webpack:///./src/components/PianoRoll.js?37e2","webpack:///./src/components/PianoRoll.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?538d","webpack:///./src/views/Home.vue","webpack:///./src/router.js","webpack:///./src/lib/mml/parser.js","webpack:///./src/lib/mml/compiler.js","webpack:///./src/store/engine.js","webpack:///./src/store.js","webpack:///./src/main.js","webpack:///./src/components/MmlEditor.vue?26d2"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","jsonpScriptSrc","p","about","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","head","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Home_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Home_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PianoRoll_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PianoRoll_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","Vue","use","BootstrapVue","Appvue_type_template_id_c72dfa40_render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","variant","_v","is-nav","to","staticRenderFns","hasParamsMixin","base","arguments","hasParams","_base","master","_this","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","params","names","getParamNames","_","forIn","values","forEach","obj","setParam","default","_inherits","_createClass","parent","_this2","node","Oscillator_2a03","Synth_2a03_classCallCheck","Synth_2a03_possibleConstructorReturn","Synth_2a03_getPrototypeOf","frequency","detune","phase","partials","partialCount","Tone","Oscillator","Synth_2a03","_writable","oscillator","chain","envelope","output","connect","wv","options","max","Synth","OscillatorNode","Oscillator_experimental","Synth_experimental_classCallCheck","Synth_experimental_possibleConstructorReturn","Synth_experimental_getPrototypeOf","bufsize","scriptNode","context","createScriptProcessor","fs","sampleRate","onaudioprocess","ev","inputBuffer","getChannelData","buf0","outputBuffer","buf1","now","_oscillator","t0","getValueAtTime","time","_get","createNode","disconnect","Synth_experimental","_this3","SynthController","SynthController_classCallCheck","clearChannel","masterChannel","Channel","volume","toMaster","SynthTypes","2a03","experimental","synthParams","tone","channel","chann","dispose","interval","velocity","getChannel","triggerAttack","normalizeInterval","setNote","triggerRelease","duration","triggerAttackRelease","ch","setParams","store","test_note","subscribe","mutation","state","payload","createChannel","registerSynthParams","subscribeAction","action","noteOn","noteChange","noteOff","noteOnOff","tr","trans","A+","A-","B+","B-","C+","C-","D+","D-","E+","E-","F+","F-","G+","G-","toUpperCase","match","octave","transport","Transport","_beats","beats","add","Time","Sequencer","controller","engine_classCallCheck","PPQ","loop","part","stop","storeEvent","latencyHint","start","cancel","indicator","Loop","Draw","schedule","position","toTicks","lookAhead","baseLatency","dispatch","engine","tempo","bpm","sequence","processTrack","Part","processEvent","map","loopEnd","Infinity","filter","evt","count","loopStart","end","setSynthParams","before","_this4","Engine","sequencer","connectStore","ff3","Appvue_type_script_lang_js_engine","Appvue_type_script_lang_js_","mounted","$store","src_Appvue_type_script_lang_js_","component","componentNormalizer","App","Homevue_type_template_id_5489f865_render","sm","disabled","_s","Number","pianoroll_scale","toFixed","min","step","model","callback","$$v","_n","expression","text","pianoroll_quantize","_l","on","click","$event","scale","quantize","size","playTransport","stopTransport","small","_e","transportPositionBars","Homevue_type_template_id_5489f865_staticRenderFns","MmlEditorvue_type_template_id_67ffb071_render","ref","mml","cmOptions","show","mmlError","message","MmlEditorvue_type_template_id_67ffb071_staticRenderFns","lib_codemirror_default","a","defineMode","startState","basecolumn","ctx","token","stream","column","next","indent","textAfter","lastError","registerHelper","cm","Pos","line","from","MmlEditorvue_type_script_lang_js_","components","codemirror","vue_codemirror","theme","lineNumbers","lineWrapping","styleActiveLine","styleSelectedText","lint","gutters","selections","computed","_objectSpread","$refs","vuex_esm","initCodeMirror","note","lodash_default","mark","clear","changeCursorByProc","focus","setCursor","markText","className","methods","getValue","cursor","getCursor","components_MmlEditorvue_type_script_lang_js_","MmlEditor_component","MmlEditor","PianoRollvue_type_template_id_5b42e586_render","ondragstart","ondrop","width","quantize_width","height","patternUnits","patternContentUnits","x","grid_offset","util","range","b","transform","getTransform","y","class","getLineClass","x1","y1","x2","y2","stage_pos","stage_width","octaves","fill","mousedown","onDrag","mouseup","mousemove","wheel","preventDefault","getXfromTime","getYfromNote","onClickNote","getHeightfromNote","getNoteColor","selected","stroke","getNoteName","cursorX","Math","data-octave","onKeyboard","mouseout","data-note","PianoRollvue_type_template_id_5b42e586_staticRenderFns","NOTE_MAP","C","D","E","F","G","A","B","C#","D#","F#","G#","A#","NOTE_COLOR_MIN","NOTE_COLOR_MID","NOTE_COLOR_MAX","PianoRollvue_type_script_lang_js_","props","String","last_pos","selection","addEventListener","updateStageWidth","setStagePos","cx","setCenterInterval","flushKeyboard","pos","some","beforeDestroy","removeEventListener","PianoRollvue_type_script_lang_js_objectSpread","mapGetters","watch","newVal","oldVal","concat","offsetX","offsetY","stage","classList","remove","buttons","deltaY","dataset","parentNode","wrapper","offsetWidth","offsetHeight","normalizeNote","E#","org_name","len","active","color","v","Color","mix","lighten","rgb","string","delay","nn","toLowerCase","dom","piano","querySelector","fn","$set","ydir","components_PianoRollvue_type_script_lang_js_","PianoRoll_component","PianoRoll","Homevue_type_script_lang_js_","pianoroll_quantize_options","transportPosition","Homevue_type_script_lang_js_objectSpread","padStart","floor","transportPlaying","views_Homevue_type_script_lang_js_","Home_component","Home","Router","router","routes","path","then","isEmpty","interpretEscape","str","escapes","f","replace","escape","charAt","hex","fromCharCode","parseInt","optWhitespace","P","regexp","desc","whitespace","number","identifier","empty","of","comment","Mml","createLanguage","rest","alt","many","slur","withLength","seq","or","skip","setLength","withAmount","command","loop_start","loop_branch","loop_end","seqMap","cl","setTone","atmark","flat","trackName","sc","charCodeAt","ec","CODE_A","CODE_Z","CODE_0","CODE_9","flatten","track","sp","trim","sepBy","ident","colon","toneName","div","zipObject","setGlobal","sig","sp1","sp2","define","def","MmlParser","newline","triggerError","SyntaxError","clone","limit","TokenScanner","compiler_classCallCheck","index","peek","MmlCompiler","defaultParams","tracks","tones","createTrack","merge","mapValues","ast","parse","status","expected","join","split","getTrack","Array","compileMml","getData","is_slur","calcDuration","calcLength","last_ln","tie","ln","scanner","loop_stack","hasNext","prev","expect","getIndex","pop","setIndex","endIndex","compiler","store_engine","namespaced","trackType","getters","noteSequence","mutations","updateSequence","updateTrackType","updateTone","updateTempo","updateMml","updateMmlError","updateTransportPlaying","isPlaying","actions","noteOnTestTone","noteOffTestTone","changeMML","commit","compile","getTrackType","getTone","changeCursorMML","errorMML","changePianoRoll","playSequence","stopSequence","tickSequence","beforeNoteOn","selectNote","Vuex","src_store","Store","config","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MmlEditor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MmlEditor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.9eb51dad.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"27bb6793\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/mc2413/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PianoRoll.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PianoRoll.vue?vue&type=style&index=0&lang=scss&\"","import Vue from \"vue\";\n\nimport BootstrapVue from \"bootstrap-vue\";\nimport \"@/assets/scss/bootstrap.scss\";\n//import \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\n\nVue.use(BootstrapVue);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',[_c('b-navbar',{staticClass:\"mb-2\",attrs:{\"type\":\"dark\",\"variant\":\"dark\"}},[_c('b-navbar-brand',[_vm._v(\"MC2413\")]),_c('b-collapse',{attrs:{\"id\":\"nav-collapse\",\"is-nav\":\"\"}},[_c('b-navbar-nav',[_c('b-nav-item',{attrs:{\"to\":\"/\"}},[_vm._v(\"Home\")]),_c('b-nav-item',{attrs:{\"to\":\"/about\"}},[_vm._v(\"About\")])],1)],1)],1)],1),_c('b-container',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from \"lodash\";\n\nfunction hasParamsMixin(base = null) {\n  class hasParams extends base {\n    constructor(master) {\n      super();\n      this.params = {};\n      const names = this.getParamNames();\n      _.forIn(names, (values, key) => {\n        values.forEach(obj => {\n          this.setParam(key, obj.name, obj.default);\n        });\n      });\n    }\n    getName() {\n      return \"base\";\n    }\n    getParamNames() {\n      return {};\n    }\n    setParams(parent) {\n      const names = this.getParamNames();\n      _.forIn(parent.params, (values, key) => {\n        values.forEach((node, i) => {\n          this.setParam(key, names[key][i].name, node.value);\n        });\n      });\n    }\n    setParam(key, name, value) {\n      return value;\n    }\n  }\n  return hasParams;\n}\n\nexport default hasParamsMixin;\n","import hasParamsMixin from \"./hasParamsMixin\";\nimport Tone from \"tone\";\nimport _ from \"lodash\";\n\nclass Oscillator_2a03 extends Tone.Oscillator {\n  constructor() {\n    super({\n      type: \"sine\",\n      frequency: 440,\n      detune: 0,\n      phase: 0,\n      partials: [],\n      partialCount: 0\n    });\n  }\n}\n\nclass Synth_2a03 extends hasParamsMixin(Tone.Synth) {\n  constructor(master) {\n    super({});\n    this._writable([\"oscillator\", \"frequency\", \"detune\", \"envelope\"]);\n    this.oscillator = new Oscillator_2a03();\n    this.oscillator.chain(this.envelope, this.output);\n    this.frequency = this.oscillator.frequency;\n    this.detune = this.oscillator.detune;\n    this.connect(master);\n  }\n  getName() {\n    return \"2a03\";\n  }\n  getParamNames() {\n    return {\n      wv: [\n        {\n          name: \"soundwave\",\n          type: \"select\",\n          options: [\"sqrt\", \"sine\", \"tri\", \"noise\"],\n          default: \"sqrt\"\n        },\n        {\n          name: \"tune\",\n          type: \"number\",\n          max: 127,\n          default: 0\n        },\n        {\n          name: \"fine\",\n          type: \"number\",\n          max: 127,\n          default: 0\n        }\n      ]\n    };\n  }\n  setParam(key, name, value) {\n    if (key == \"wv\") {\n      if (name == \"soundwave\") {\n        if (value == \"sqrt\") {\n          this.oscillator.type = \"square\";\n        } else if (value == \"tri\") {\n          this.oscillator.type = \"triangle\";\n        }\n      }\n    }\n  }\n}\n\nexport default Synth_2a03;\n","import hasParamsMixin from \"./hasParamsMixin\";\nimport Tone from \"tone\";\nimport _ from \"lodash\";\n\nclass ScriptOscillatorNode extends Tone.OscillatorNode {\n  constructor(bufsize, proc) {\n    super();\n    const osc = this.context.createScriptProcessor(bufsize);\n    osc.start = Tone.noOp;\n    osc.stop = Tone.noOp;\n\n    this._oscillator = osc;\n    this._oscillator.onaudioprocess = proc;\n    osc.connect(this._context.destination);\n  }\n}\n\nclass Oscillator_experimental extends Tone.Oscillator {\n  constructor() {\n    super({\n      type: \"sine\",\n      frequency: 440,\n      detune: 0,\n      phase: 0,\n      partials: [],\n      partialCount: 0\n    });\n  }\n  createNode() {\n    const bufsize = 4096;\n    this.scriptNode = this.context.createScriptProcessor(bufsize);\n    let phase = 0;\n    const fs = this.context.sampleRate;\n\n    this.scriptNode.onaudioprocess = (ev => {\n      const in0 = ev.inputBuffer.getChannelData(0);\n      const buf0 = ev.outputBuffer.getChannelData(0);\n      const buf1 = ev.outputBuffer.getChannelData(1);\n      const now = this._oscillator.now() + 4096 / fs;\n      //      console.log(this.frequency.getValueAtTime(now), now);\n      for (let i = 0; i < bufsize; ++i) {\n        const t0 = fs / this.frequency.getValueAtTime(now + bufsize / fs);\n        var s = (2 * phase) / t0;\n        buf0[i] = buf1[i] = s - 1;\n        phase++;\n        if (phase >= t0) {\n          phase = 0;\n        }\n      }\n    }).bind(this);\n    this.scriptNode.connect(this.output);\n  }\n  _start(time) {\n    super._start(time);\n    this.createNode();\n    this._oscillator.connect(this.scriptNode);\n    this._oscillator.disconnect(this.output);\n  }\n}\n\nclass Synth_experimental extends hasParamsMixin(Tone.Synth) {\n  constructor(master) {\n    super({});\n    this._writable([\"oscillator\", \"frequency\", \"detune\", \"envelope\"]);\n    this.oscillator = new Oscillator_experimental();\n    this.oscillator.chain(this.envelope, this.output);\n    this.frequency = this.oscillator.frequency;\n    this.detune = this.oscillator.detune;\n    this.connect(master);\n  }\n  getName() {\n    return \"experimental\";\n  }\n  getParamNames() {\n    return {\n      wv: [\n        {\n          name: \"soundwave\",\n          type: \"select\",\n          options: [\"sqrt\", \"sine\", \"tri\", \"noise\"],\n          default: \"sqrt\"\n        },\n        {\n          name: \"tune\",\n          type: \"number\",\n          max: 127,\n          default: 0\n        },\n        {\n          name: \"fine\",\n          type: \"number\",\n          max: 127,\n          default: 0\n        }\n      ]\n    };\n  }\n  setParam(key, name, value) {\n    if (key == \"wv\") {\n      if (name == \"soundwave\") {\n        if (value == \"sqrt\") {\n          this.oscillator.type = \"square\";\n        } else if (value == \"tri\") {\n          this.oscillator.type = \"triangle\";\n        }\n      }\n    }\n  }\n}\n\nexport default Synth_experimental;\n","import Tone from \"tone\";\nimport _ from \"lodash\";\n\nimport Synth_2a03 from \"./Synth_2a03\";\nimport Synth_experimental from \"./Synth_experimental\";\n\nclass SynthController {\n  constructor() {\n    this.clearChannel();\n    this.masterChannel = new Tone.Channel({\n      volume: -10\n    }).toMaster();\n\n    this.SynthTypes = {\n      \"2a03\": Synth_2a03,\n      experimental: Synth_experimental\n    };\n    this.synthParams = {};\n  }\n  createChannel(name, type) {\n    if (!type || !this.SynthTypes[type]) type = \"2a03\"; //default\n    const tone = new this.SynthTypes[type](this.masterChannel);\n    this.channel[name] = tone;\n  }\n  clearChannel() {\n    _.forIn(this.channel, chann => chann.dispose());\n    this.channel = {};\n  }\n  getChannel(name) {\n    return this.channel[name];\n  }\n  noteOn(interval, velocity, time, channel) {\n    return this.getChannel(channel).triggerAttack(\n      this.normalizeInterval(interval),\n      time,\n      velocity\n    );\n  }\n  noteChange(interval, time, channel) {\n    return this.getChannel(channel).setNote(\n      this.normalizeInterval(interval),\n      time\n    );\n  }\n  noteOff(time, channel) {\n    return this.getChannel(channel).triggerRelease(time);\n  }\n  noteOnOff(interval, duration, time, velocity, channel) {\n    return this.getChannel(channel).triggerAttackRelease(\n      this.normalizeInterval(interval),\n      duration,\n      time,\n      velocity\n    );\n  }\n  registerSynthParams(params) {\n    this.synthParams = params;\n  }\n  setSynthParams(ch, name) {\n    const chann = this.getChannel(ch);\n    const tone = this.synthParams[name];\n    chann.setParams(tone);\n  }\n  connectStore(store) {\n    let test_note = null;\n    store.subscribe((mutation, state) => {\n      switch (mutation.type) {\n        case \"engine/updateTrackType\":\n          this.clearChannel();\n          _.forIn(mutation.payload, (type, name) => {\n            this.createChannel(name, type);\n          });\n          break;\n        case \"engine/updateTone\":\n          this.registerSynthParams(mutation.payload);\n          break;\n      }\n    });\n\n    store.subscribeAction(\n      ((action, state) => {\n        let type = action.type,\n          payload = action.payload;\n        switch (type) {\n          case \"engine/noteOnTestTone\":\n            if (test_note != payload) {\n              if (test_note === null) {\n                this.noteOn(payload, 0.5, undefined, \"a\");\n              } else {\n                this.noteChange(payload);\n              }\n            }\n            test_note = payload;\n            break;\n          case \"engine/noteOffTestTone\":\n            this.noteOff(undefined, \"a\");\n            test_note = null;\n            break;\n          case \"engine/selectNote\":\n            this.noteOnOff(\n              payload.interval,\n              0.25,\n              undefined,\n              payload.velocity,\n              payload.tr\n            );\n            break;\n          default:\n            break;\n        }\n      }).bind(this)\n    );\n  }\n  normalizeInterval(interval) {\n    const trans = {\n      \"A+\": \"A#\",\n      \"A-\": \"G#\",\n      \"B+\": \"C\",\n      \"B-\": \"A#\",\n      \"C+\": \"C#\",\n      \"C-\": \"B\",\n      \"D+\": \"D#\",\n      \"D-\": \"C#\",\n      \"E+\": \"F\",\n      \"E-\": \"D#\",\n      \"F+\": \"F#\",\n      \"F-\": \"E\",\n      \"G+\": \"G#\",\n      \"G-\": \"F#\"\n    };\n    let n = interval.toUpperCase().match(/([A-G][#+-]*)(\\d+)/);\n    if (!n) return \"\";\n    let name = n[1];\n    let octave = n[2];\n    if (trans[n[1]]) name = trans[n[1]];\n    if (n[1] == \"C-\") octave--;\n    if (n[1] == \"B+\") octave++;\n    return name + octave;\n  }\n}\n\nexport default SynthController;\n","import Tone from \"tone\";\nimport _ from \"lodash\";\nwindow.Tone = Tone;\n\nimport SynthController from \"./engine/SynthController\";\n\nconst transport = Tone.Transport;\nconst _beats = (beats, add) => Tone.Time(beats * 192 + (add ? add : 0), \"i\");\n\nclass Sequencer {\n  constructor(controller) {\n    this.controller = controller;\n    transport.PPQ = 192;\n    transport.loop = false;\n    this.part = {};\n  }\n  connectStore(store) {\n    this.store = store;\n    store.subscribeAction((action, state) => {\n      let type = action.type,\n        payload = action.payload;\n      switch (type) {\n        case \"engine/playSequence\":\n          if (transport.state == \"started\") transport.stop(0);\n          this.storeEvent(state);\n          Tone.context.latencyHint = \"playback\";\n          transport.start();\n          break;\n        case \"engine/stopSequence\":\n          transport.stop();\n          Tone.context.latencyHint = \"interactive\";\n          break;\n      }\n    });\n  }\n  storeEvent(state) {\n    transport.cancel();\n    this.indicator = new Tone.Loop(\n      (time => {\n        Tone.Draw.schedule(() => {\n          const time =\n            Tone.Time(transport.position).toTicks() / 192 -\n            Tone.Time(\n              Tone.context.lookAhead + Tone.context.baseLatency\n            ).toTicks() /\n              192;\n          this.store.dispatch(\"engine/tickSequence\", time > 0 ? time : 0);\n        }, time);\n      }).bind(this),\n      0.05\n    ).start();\n\n    if (state.engine.tempo) {\n      transport.bpm.value = state.engine.tempo;\n    }\n    _.forIn(state.engine.sequence, this.processTrack.bind(this));\n  }\n  processTrack(data, name) {\n    let part = new Tone.Part(\n      this.processEvent.bind(this),\n      _.map(data, d => [_beats(d.time), d])\n    ).start();\n    part.loopEnd = Infinity;\n\n    //bpm change(global)\n    data\n      .filter(evt => evt.type == \"bpm\")\n      .forEach(evt => {\n        transport.schedule(time => {\n          transport.bpm.value = evt.bpm;\n        }, _beats(evt.time));\n      });\n    //runtime loop\n    data\n      .filter(evt => evt.type === \"runtime_loop\")\n      .forEach(evt => {\n        part.loop = evt.count === 0 ? true : evt.count;\n        transport.schedule(time => {\n          part.loopStart = _beats(evt.start);\n          part.loopEnd = _beats(evt.end);\n        }, _beats(evt.time, 1)); //notenote\n      });\n    //set_tone\n    data\n      .filter(evt => evt.type === \"set_tone\")\n      .forEach(evt => {\n        const controller = this.controller;\n        transport.schedule(time => {\n          controller.setSynthParams(evt.tr, evt.tone);\n        }, _beats(evt.time));\n      });\n\n    //before note\n    data\n      .filter(evt => evt.type == \"note\" || evt.type == \"pitch\")\n      .forEach(evt => {\n        let before = evt.time - 2;\n        if (before > 2) {\n          Tone.Draw.schedule(() => {\n            this.store.dispatch(\"engine/beforeNoteOn\", evt);\n          }, _beats(before));\n        }\n      });\n  }\n  processEvent(time, evt) {\n    switch (evt.type) {\n      case \"note\":\n      case \"pitch\":\n        this.controller.noteOnOff(\n          evt.interval,\n          _beats(evt.duration),\n          time,\n          evt.velocity,\n          evt.tr\n        );\n        Tone.Draw.schedule(() => {\n          this.store.dispatch(\"engine/noteOn\", evt);\n        }, time);\n        Tone.Draw.schedule(() => {\n          this.store.dispatch(\"engine/noteOff\", evt);\n        }, Tone.Time(Tone.Time(time).toTicks() + evt.duration * 192, \"i\"));\n        break;\n    }\n  }\n}\n\nclass Engine {\n  constructor() {\n    this.controller = new SynthController();\n    this.sequencer = new Sequencer(this.controller);\n  }\n  connectStore(store) {\n    this.controller.connectStore(store);\n    this.sequencer.connectStore(store);\n  }\n}\n\nexport default Engine;\nexport { SynthController, Sequencer };\n","export default \"// FF3 Theme\\n\\n//define\\n#track a-c 2a03\\n\\n@1:2a03{\\n  wv: \\\"sqrt\\\"\\n}\\n\\n@3:2a03{\\n  wv: \\\"tri\\\"\\n}\\n\\n\\n// Intro\\nt t136 L1\\na o5L4v15@1\\nb o4L8v11@1\\nc o3L2v13@3\\n\\nt rrrr\\na g+d+ef+ g2f+e e1 d+2...r16\\nb b2g4ab> c4<b4a4g4 f+2ef+ga b4f+ga4d+4\\nc ec <a>d< b>f+ b<b>>\\n\\nt rrrr\\na c2e2 d+2^8.r16<b> e2g2 f+2...r16\\nb e4ede4g4 f+4f+ef+2 >c4<cdef+gab4f+4d+4<b4>\\nc L8 c4<cdef+ga brf+rd+r<br> erede4c4 f+rf+ef+2\\n\\nt rrr t126 r4 t118 r4 t112 r4 t96 r4\\na e2g2 f+2^8.r16d+4 a2>c2< bag+f+\\nb g2e4g4 <b4b>c+d+2 e4f+4g4e4 d+4c+4<b4a4\\nc cdef+g4f+e d+ef+ga4b4> L2 c<a f+<b\\n\\n// Theme\\n\\nt t144\\na o4L4v15\\nb o3L4v11\\nc o3L2v13\\n\\nabc [\\n\\na b>ef+<b> a2g+f+ ed+8e8f+ee2d+2 c+f+g+c+ b2ag+ f+f8g+8f+c+ g+2f+2<\\nb b2.>c+8d+8ec+d+f+ c+d+8e8f+g+8a+8 bf+d+<b> f+2ff+8g+8 af+fb a2a+2 b2a2<\\nc ed+ c+<b aa+ b1> ag+ f+f f+e d+<b>\\n\\na b>ef+<b> a2g+f+ ed+8e8f+ee2d+2 c+f+g+c+ b2ag+ f+f8g+8f+c+ g+2f+f+16g+16a16b16>\\nb b2.>c+8d+8ec+d+f+ c+d+8e8f+g+8a+8 bf+d+<b> f+2ff+8g+8 af+fb a2a+2 b2a2\\nc ed+ c+c c+<a+ b1> ag+ f+f f+e d+<b>\\n\\n//a >>\\n//b >\\n//c\\n\\n// a c+2.^-8r8c+< b2.^-8r8g+ aa8g+8f+f f+g+ab>\\na c+2^8r8c+< b2^8r8g+ aa8g+8f+f f+g+ab>\\nb L8 e4ag+a4e4 e4bag+f+eg+> d<af+4g+c+d+f f+4<b>c+def+4\\nc L8 ar<ab>c+d+ef+ g+rg+f+g+rer f+4d4c+4bg+ f+4e4d4c+4<\\n\\na d2^8r8d c+2^8r8<a bb8>c8<bb8>c8< bag+f+<\\nb g2^gab a2^agf+ e4edcde4 d+2e4f+4<\\nc br>babrgr f+r>c+r<ar<ab> cr>cr<ef+g4 f+4d+4<b4a4>\\n\\nb L4\\nc L2\\n\\nabc ]0\\n\"","<template>\n  <div id=\"app\">\n    <div>\n      <b-navbar class=\"mb-2\" type=\"dark\" variant=\"dark\">\n        <b-navbar-brand>MC2413</b-navbar-brand>\n        <b-collapse id=\"nav-collapse\" is-nav>\n          <b-navbar-nav>\n            <b-nav-item to=\"/\">Home</b-nav-item>\n            <b-nav-item to=\"/about\">About</b-nav-item>\n          </b-navbar-nav>\n        </b-collapse>\n      </b-navbar>\n    </div>\n    <b-container>\n      <router-view />\n    </b-container>\n  </div>\n</template>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  /*   color: #2c3e50; */\n}\n#nav {\n  padding: 30px;\n}\n\n#nav a {\n  font-weight: bold;\n  color: #2c3e50;\n}\n\n#nav a.router-link-exact-active {\n  color: #42b983;\n}\n</style>\n\n<script>\nimport Engine from \"./lib/engine.js\";\n\nconst engine = new Engine();\nimport sample from \"../examples/ff3.mml\";\n\nexport default {\n  name: \"app\",\n  mounted() {\n    engine.connectStore(this.$store);\n    this.$store.dispatch(\"engine/changeMML\", sample);\n  }\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=c72dfa40&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('b-row',{staticClass:\"mb-2 pianoroll-control\"},[_c('b-col',{attrs:{\"sm\":\"2\"}},[_c('b-button',{staticClass:\"float-left\",attrs:{\"disabled\":\"\"}},[_vm._v(\"scale:\"+_vm._s(Number(_vm.pianoroll_scale).toFixed(2)))])],1),_c('b-col',{attrs:{\"sm\":\"6\"}},[_c('b-form-input',{attrs:{\"type\":\"range\",\"min\":\"0.5\",\"max\":\"4\",\"step\":\"0.25\",\"variant\":\"secondary\"},model:{value:(_vm.pianoroll_scale),callback:function ($$v) {_vm.pianoroll_scale=_vm._n($$v)},expression:\"pianoroll_scale\"}})],1),_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('b-dropdown',{staticClass:\"float-right\",attrs:{\"text\":(\"grid:\" + _vm.pianoroll_quantize)}},_vm._l((_vm.pianoroll_quantize_options),function(o){return _c('b-dropdown-item',{key:o,on:{\"click\":function($event){_vm.pianoroll_quantize = o}}},[_vm._v(_vm._s(o))])}),1)],1)],1),_c('piano-roll',{staticClass:\"piano-roll mb-2\",attrs:{\"scale\":_vm.pianoroll_scale,\"quantize\":_vm.pianoroll_quantize}}),_c('b-row',{staticClass:\"mb-2 tranport\"},[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('b-button-group',{attrs:{\"size\":\"sm\"}},[_c('b-button',{attrs:{\"variant\":\"success\"},on:{\"click\":_vm.playTransport}},[_vm._v(\"Play\")]),_c('b-button',{on:{\"click\":_vm.stopTransport}},[_vm._v(\"Stop\")]),_c('b-button',{attrs:{\"disabled\":\"\"}},[(_vm.transportPlaying)?_c('b-spinner',{attrs:{\"small\":\"\",\"type\":\"grow\"}}):_vm._e(),_vm._v(\"\\n          \"+_vm._s(_vm.transportPositionBars)+\"\\n        \")],1)],1)],1)],1),_c('mml-editor')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('codemirror',{ref:\"cm\",attrs:{\"value\":_vm.mml,\"options\":_vm.cmOptions}}),(_vm.mmlError)?_c('b-alert',{staticClass:\"mt-4\",attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.mmlError.message)+\"\\n  \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <codemirror ref=\"cm\" :value=\"mml\" :options=\"cmOptions\" />\n    <b-alert class=\"mt-4\" v-if=\"mmlError\" show variant=\"danger\">\n      {{ mmlError.message }}\n    </b-alert>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.CodeMirror {\n  text-align: left;\n  border: 1px solid #ccc;\n}\n</style>\n\n<script>\nimport { mapState } from \"vuex\";\nimport _ from \"lodash\";\nimport { codemirror } from \"vue-codemirror\";\nimport \"codemirror/lib/codemirror.css\";\n//import \"codemirror/theme/base16-dark.css\";\nimport \"../assets/scss/mmleditor-theme.scss\";\n\nimport \"codemirror/addon/selection/active-line.js\";\nimport \"codemirror/addon/selection/mark-selection.js\";\nimport \"codemirror/addon/lint/lint.js\";\nimport \"codemirror/addon/lint/lint.css\";\n\nimport CM from \"codemirror\";\n\nCM.defineMode(\"mml\", () => {\n  return {\n    startState: function(basecolumn) {\n      return {\n        ctx: null\n      };\n    },\n    token(stream, state) {\n      if (stream.column() == 0) {\n        if (state.ctx === null && stream.match(/^\\s*[a-z0-9]+/)) {\n          state.ctx = \"track\";\n          return \"qualifier\";\n        }\n        if (stream.match(/^\\s*@.+?:.+/)) {\n          state.ctx = \"define_tone\";\n          return \"variable\";\n        }\n      }\n      if (state.ctx == \"define_tone\") {\n        if (stream.match(/\".+?\"/)) {\n          return \"string\";\n        }\n        if (stream.match(/.+?:/)) {\n          return \"keyword\";\n        }\n        if (stream.match(\",\")) {\n          return \"operator\";\n        }\n        if (stream.match(\"{\")) {\n          return \"bracket\";\n        }\n        if (stream.match(\"}\")) {\n          state.ctx = null;\n          return \"bracket\";\n        }\n      } else if (state.ctx == \"track\") {\n        if (stream.match(/[a-gr][+#-]*/i)) {\n          return \"operator\";\n        } else if (stream.match(/[\\d^.&]+/)) {\n          return \"number\";\n        } else if (stream.match(/[><tlvqo]/i)) {\n          return \"keyword\";\n        }\n      }\n\n      if (stream.match(/\\/\\/.*/)) {\n        return \"comment\";\n      } else {\n        stream.next();\n        return null;\n      }\n    },\n    indent: (state, textAfter) => {\n      if (state.ctx == \"define_tone\" && textAfter != \"}\") {\n        return 2;\n      }\n    }\n  };\n});\n\nlet lastError = null;\nCM.registerHelper(\"lint\", \"mml\", function(text, cm) {\n  const err = lastError;\n  if (err) {\n    const start = new CM.Pos(err.start.line - 1, err.start.column - 1),\n      end = new CM.Pos(err.end.line - 1, err.end.column - 1);\n    return [{ from: start, to: end, message: err.message }];\n  }\n  return [];\n});\n\n// require styles\nexport default {\n  name: \"mml-editor\",\n  components: {\n    codemirror\n  },\n  data() {\n    return {\n      cmOptions: {\n        mode: \"mml\",\n        theme: \"mmleditor\",\n        lineNumbers: true,\n        line: true,\n        lineWrapping: true,\n        styleActiveLine: true,\n        styleSelectedText: true,\n        lint: true,\n        gutters: [\"CodeMirror-lint-markers\"]\n      },\n      selections: {}\n    };\n  },\n  computed: {\n    codemirror() {\n      return this.$refs.cm.codemirror;\n    },\n    ...mapState(\"engine\", {\n      mml: \"mml\",\n      mmlError: \"mmlError\"\n    })\n  },\n  mounted() {\n    const cm = this.codemirror;\n    this.initCodeMirror(cm);\n    this.$store.subscribe((mutation, state) => {\n      if (mutation.type == \"engine/updateMmlError\") {\n        lastError = mutation.payload;\n      }\n    });\n    this.$store.subscribeAction(\n      ((action, state) => {\n        const note = action.payload;\n        let start, end;\n        switch (action.type) {\n          case \"engine/playSequence\":\n          case \"engine/stopSequence\":\n            _.forIn(this.selections, mark => mark.clear());\n            this.selections = {};\n            break;\n          case \"engine/selectNote\":\n          case \"engine/noteOn\":\n            this.changeCursorByProc = true;\n            start = new CM.Pos(note.start.line - 1, note.start.column - 1);\n            end = new CM.Pos(note.end.line - 1, note.end.column - 1);\n\n            if (action.type == \"engine/selectNote\") {\n              cm.focus();\n              cm.setCursor(start);\n            }\n            if (this.selections[note.tr]) {\n              this.selections[note.tr].clear();\n            }\n            this.selections[note.tr] = cm.markText(start, end, {\n              className: \"flush\"\n            });\n            break;\n          case \"engine/noteOff\":\n            if (this.selections[note.tr]) {\n              this.selections[note.tr].clear();\n            }\n            break;\n        }\n      }).bind(this)\n    );\n  },\n  methods: {\n    initCodeMirror(cm) {\n      cm.on(\"change\", (cm, ch) => {\n        this.$store.dispatch(\"engine/changeMML\", cm.getValue());\n      });\n      cm.on(\"cursorActivity\", cm => {\n        if (this.changeCursorByProc) {\n          this.changeCursorByProc = false;\n          return;\n        }\n        const cursor = cm.getCursor();\n        this.$store.dispatch(\"engine/changeCursorMML\", {\n          line: cursor.line + 1,\n          column: cursor.ch + 1\n        });\n      });\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MmlEditor.vue?vue&type=template&id=67ffb071&\"\nimport script from \"./MmlEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MmlEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MmlEditor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrapper\",attrs:{\"ondragstart\":\"return false;\",\"ondrop\":\"return false;\"}},[_c('svg',[_c('defs',[_c('pattern',{attrs:{\"id\":\"ptn-grid\",\"width\":_vm.quantize_width * _vm.quantize,\"height\":\"112\",\"patternUnits\":\"userSpaceOnUse\",\"patternContentUnits\":\"userSpaceOnUse\",\"x\":32 + _vm.grid_offset}},_vm._l((_vm.util.range(_vm.quantize)),function(b){return _c('g',{key:b,attrs:{\"transform\":_vm.getTransform(b * _vm.quantize_width, 0)}},[_c('rect',{staticClass:\"a\",attrs:{\"y\":\"0\",\"width\":_vm.quantize_width,\"height\":\"112\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"10\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"28\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"46\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"74\",\"width\":_vm.quantize_width,\"height\":\"10\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"94\",\"width\":_vm.quantize_width,\"height\":\"9\"}}),_c('line',{class:_vm.getLineClass(b, _vm.quantize),attrs:{\"x1\":\"0\",\"y1\":\"0\",\"x2\":\"0\",\"y2\":\"112\"}}),_c('line',{staticClass:\"d\",attrs:{\"x1\":\"0\",\"y1\":\"0\",\"x2\":_vm.quantize_width,\"y2\":\"0\"}}),_c('line',{staticClass:\"c\",attrs:{\"x1\":\"0\",\"y1\":\"64\",\"x2\":_vm.quantize_width,\"y2\":\"64\"}})])}),0)]),_c('g',{ref:\"stage\",staticClass:\"trans\",attrs:{\"transform\":_vm.getTransform(0, _vm.stage_pos.y * -1, _vm.scale)}},[_c('rect',{attrs:{\"x\":\"32\",\"width\":_vm.stage_width,\"height\":_vm.octaves * 112,\"fill\":\"url(#ptn-grid)\"},on:{\"mousedown\":function($event){return _vm.onDrag('start', $event)},\"mouseup\":function($event){return _vm.onDrag('end', $event)},\"mousemove\":function($event){return _vm.onDrag('move', $event)},\"wheel\":function($event){$event.preventDefault();return _vm.onDrag('wheel', $event)}}}),_c('g',{ref:\"note\",staticClass:\"note-container\",attrs:{\"transform\":_vm.getTransform(_vm.stage_pos.x * -1, 0)}},_vm._l((_vm.note),function(n){return _c('g',{key:n.id,attrs:{\"transform\":_vm.getTransform(_vm.getXfromTime(n.time) + 32, _vm.getYfromNote(n.interval))},on:{\"click\":function($event){return _vm.onClickNote($event, n)}}},[_c('rect',{staticClass:\"note\",attrs:{\"width\":_vm.getXfromTime(n.duration),\"height\":_vm.getHeightfromNote(n.interval),\"fill\":_vm.getNoteColor(n, n.selected),\"stroke\":_vm.getNoteColor(n, true)}}),(_vm.scale >= 2.0)?_c('text',{attrs:{\"transform\":\"translate(2 6.5)\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.getNoteName(n.interval))+\"\\n          \")]):_vm._e()])}),0),(_vm.cursorX)?_c('rect',{ref:\"cursor\",staticClass:\"cursor trans\",attrs:{\"transform\":_vm.getTransform(_vm.stage_pos.x * -1, 0),\"x\":_vm.cursorX + 32,\"width\":Math.max(2, 4 / _vm.scale),\"height\":_vm.octaves * 112}}):_vm._e(),_c('g',{ref:\"piano\",attrs:{\"id\":\"piano\"}},_vm._l((_vm.util.range(_vm.octaves)),function(o){return _c('g',{key:(\"key-\" + o),attrs:{\"transform\":_vm.getTransform(0, (9 - o) * 112),\"data-octave\":o},on:{\"mousedown\":function($event){return _vm.onKeyboard('down', $event)},\"mousemove\":function($event){return _vm.onKeyboard('move', $event)},\"mouseup\":function($event){return _vm.onKeyboard('up', $event)},\"mouseout\":function($event){return _vm.onKeyboard('out', $event)}}},[_c('rect',{staticClass:\"a\",attrs:{\"y\":\"96\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"c\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"80\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"d\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"64\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"e\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"48\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"f\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"32\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"g\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"16\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"a\"}}),_c('rect',{staticClass:\"a\",attrs:{\"y\":\"0\",\"width\":\"32\",\"height\":\"16\",\"data-note\":\"b\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"94\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"c#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"74\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"d#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"46\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"f#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"28\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"g#\"}}),_c('rect',{staticClass:\"b\",attrs:{\"y\":\"10\",\"width\":\"20\",\"height\":\"8\",\"data-note\":\"a#\"}}),_c('text',{staticClass:\"c\",attrs:{\"transform\":\"translate(22 108)\"}},[_vm._v(\"C\"+_vm._s(o))])])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapGetters } from \"vuex\";\nimport Color from \"color\";\nimport _ from \"lodash\";\n\nconst NOTE_MAP = {\n  C: { y: 103, height: 9 },\n  D: { y: 84, height: 10 },\n  E: { y: 64, height: 10 },\n  F: { y: 55, height: 9 },\n  G: { y: 37, height: 9 },\n  A: { y: 19, height: 9 },\n  B: { y: 0, height: 10 },\n  \"C#\": { y: 94, height: 9 },\n  \"D#\": { y: 74, height: 10 },\n  \"F#\": { y: 46, height: 9 },\n  \"G#\": { y: 28, height: 9 },\n  \"A#\": { y: 10, height: 9 }\n};\n\nconst NOTE_COLOR_MIN = \"#2283e5\";\nconst NOTE_COLOR_MID = \"#855181\";\nconst NOTE_COLOR_MAX = \"#e42222\";\n\nexport default {\n  name: \"piano-roll\",\n  props: {\n    scale: {\n      type: Number,\n      default: 2.0\n    },\n    quantize: {\n      type: Number,\n      default: 8\n    },\n    x: {\n      type: Number,\n      default: 0\n    },\n    y: {\n      type: String,\n      default: \"b4\"\n    }\n  },\n  data() {\n    return {\n      util: _,\n      octaves: 10,\n      stage_pos: {\n        x: 0,\n        y: 0\n      },\n      stage_width: 10000,\n      last_pos: null,\n      selection: null,\n      cursorX: null\n    };\n  },\n  mounted() {\n    window.addEventListener(\"resize\", this.updateStageWidth);\n    this.updateStageWidth();\n\n    this.setStagePos(\n      this.x * this.scale,\n      this.getYfromNote(this.y) * this.scale\n    );\n\n    this.$store.subscribeAction((action, state) => {\n      if (action.type == \"engine/tickSequence\") {\n        const time = action.payload;\n        let x = this.getXfromTime(time);\n        this.cursorX = x;\n        const cx = this.stage_width / 2;\n        if (x > this.stage_pos.x + cx || x < this.stage_pos.x) {\n          this.setStagePos(x - cx, this.stage_pos.y);\n        }\n      }\n      if (action.type == \"engine/beforeNoteOn\") {\n        const note = action.payload;\n        this.setCenterInterval(note.interval);\n      }\n      if (action.type == \"engine/noteOn\") {\n        const note = action.payload;\n        this.flushKeyboard(true, note);\n      }\n      if (action.type == \"engine/noteOff\") {\n        const note = action.payload;\n        this.flushKeyboard(false, note, 100);\n      }\n      if (action.type == \"engine/changeCursorMML\") {\n        const pos = action.payload;\n        let note = null,\n          last = { line: 1, column: 1 };\n        this.note.some(n => {\n          if (\n            n.start.line == pos.line &&\n            n.start.column <= pos.column &&\n            n.end.column > pos.column\n          ) {\n            note = n;\n            return true;\n          }\n        });\n        if (note) {\n          this.setCenterInterval(note.interval, note.time);\n          this.cursorX = this.getXfromTime(note.time);\n        }\n      }\n    });\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"resize\", this.updateStageWidth);\n  },\n  computed: {\n    quantize_width() {\n      return (16 * 16) / this.quantize;\n    },\n    grid_offset() {\n      return (this.stage_pos.x % (this.quantize_width * this.quantize)) * -1;\n    },\n    ...mapGetters(\"engine\", {\n      note: \"noteSequence\"\n    })\n  },\n  watch: {\n    scale(newVal, oldVal) {\n      this.stage_pos.x *= newVal / oldVal;\n      this.stage_pos.y *= newVal / oldVal;\n      this.updateStageWidth();\n    }\n  },\n  methods: {\n    getTransform(x, y, scale) {\n      let s = \"\";\n      if (x !== null && y !== null) s += `translate(${x},${y})`;\n      if (scale) s += ` scale(${scale})`;\n      return s;\n    },\n    getLineClass(b, quantize) {\n      if (b == 0) return \"measure\";\n      return b % (quantize / 4) == 0 ? \"beat\" : \"tick\";\n    },\n    onDrag(type, e) {\n      switch (type) {\n        case \"start\":\n          this.last_pos = {\n            x: e.offsetX,\n            y: e.offsetY\n          };\n          this.$refs.stage.classList.remove(\"trans\");\n          break;\n        case \"move\":\n          if (!e.buttons) this.last_pos = null;\n          if (this.last_pos !== null) {\n            this.setStagePos(\n              this.stage_pos.x + (this.last_pos.x - e.offsetX) / this.scale,\n              this.stage_pos.y + (this.last_pos.y - e.offsetY) / this.scale\n            );\n            this.last_pos = {\n              x: e.offsetX,\n              y: e.offsetY\n            };\n          }\n          break;\n        case \"end\":\n          this.last_pos = null;\n          this.$refs.stage.classList.add(\"trans\");\n          break;\n        case \"wheel\":\n          this.setStagePos(\n            this.stage_pos.x,\n            this.stage_pos.y + e.deltaY / 2.0 / this.scale\n          );\n          break;\n      }\n    },\n    onKeyboard(type, e) {\n      let note = e.target.dataset.note + e.target.parentNode.dataset.octave;\n      switch (type) {\n        case \"down\":\n          this.$store.dispatch(\"engine/noteOnTestTone\", note);\n          break;\n        case \"up\":\n          this.$store.dispatch(\"engine/noteOffTestTone\");\n          break;\n        case \"move\":\n          if (e.buttons) {\n            this.$store.dispatch(\"engine/noteOnTestTone\", note);\n          }\n          break;\n        case \"out\":\n          this.$store.dispatch(\"engine/noteOffTestTone\");\n          break;\n      }\n    },\n    updateStageWidth() {\n      this.stage_width = this.$refs.wrapper.offsetWidth / this.scale;\n    },\n    setStagePos(x, y) {\n      this.stage_pos.x = Math.max(0, x);\n      this.stage_pos.y = Math.min(\n        Math.max(0, y),\n        112 * 10 * this.scale - this.$refs.wrapper.offsetHeight\n      );\n    },\n    normalizeNote(note) {\n      const trans = {\n        \"A+\": \"A#\",\n        \"A-\": \"G#\",\n        \"B+\": \"C\",\n        \"B-\": \"A#\",\n        \"C+\": \"C#\",\n        \"C-\": \"B\",\n        \"D+\": \"D#\",\n        \"D-\": \"C#\",\n        \"E#\": \"F\",\n        \"E+\": \"F\",\n        \"E-\": \"D#\",\n        \"F+\": \"F#\",\n        \"F-\": \"E\",\n        \"G+\": \"G#\",\n        \"G-\": \"F#\"\n      };\n      let n = note.toUpperCase().match(/([A-G][#+-]*)(\\d+)/);\n      if (!n) return null;\n      let name = n[1];\n      if (trans[n[1]]) name = trans[n[1]];\n      return {\n        name: name,\n        org_name: n[1].toUpperCase(),\n        octave: n[2]\n      };\n    },\n    getNoteName(note) {\n      const n = this.normalizeNote(note);\n      if (!n) return \"\";\n      return n.org_name;\n    },\n    getYfromNote(note) {\n      const n = this.normalizeNote(note);\n      if (!n) return 0;\n      return 112 * (9 - n.octave) + NOTE_MAP[n.name].y;\n    },\n    getHeightfromNote(note) {\n      const n = this.normalizeNote(note);\n      return NOTE_MAP[n.name].height;\n    },\n    getXfromTime(len) {\n      return len * 16 * 4;\n    },\n    getNoteColor(note, active) {\n      const v = note.velocity;\n      let color;\n      if (v > 0.5) {\n        color = Color(NOTE_COLOR_MID);\n        color = color.mix(Color(NOTE_COLOR_MAX), (v - 0.5) * 2);\n      } else {\n        color = Color(NOTE_COLOR_MIN);\n        color = color.mix(Color(NOTE_COLOR_MID), v * 2);\n      }\n      return active\n        ? color\n            .lighten(0.5)\n            .rgb()\n            .string()\n        : color.rgb().string();\n    },\n    //bad function\n    flushKeyboard(on, note, delay) {\n      const nn = this.normalizeNote(note.interval);\n      const name = nn.name.toLowerCase(),\n        octave = nn.octave;\n\n      const dom = this.$refs.piano.querySelector(\n        `g[data-octave=\"${octave}\"] rect[data-note=\"${name}\"]`\n      );\n      if (dom) {\n        const fn = () => {\n          if (on) {\n            dom.classList.add(\"active\");\n          } else {\n            dom.classList.remove(\"active\");\n          }\n        };\n        if (delay) {\n          _.delay(fn, delay);\n        } else {\n          fn();\n        }\n      }\n    },\n    onClickNote(evt, note) {\n      if (this.selection) {\n        this.$set(this.selection, \"selected\", false);\n      }\n      this.$set(note, \"selected\", true);\n      this.setCenterInterval(note.interval, note.time);\n      this.cursorX = this.getXfromTime(note.time);\n      this.selection = note;\n      this.$store.dispatch(\"engine/selectNote\", note);\n    },\n    setCenterInterval(interval, time) {\n      let y = this.getYfromNote(interval) * this.scale,\n        x =\n          this.getXfromTime(time) -\n          this.$refs.wrapper.offsetWidth / 2 / this.scale;\n      if (x < 0) x = 0;\n      let ydir = null;\n      if (y < this.stage_pos.y) ydir = \"up\";\n      if (y > this.stage_pos.y + this.$refs.wrapper.offsetHeight) ydir = \"down\";\n\n      if (ydir || x != this.stage_pos.x) {\n        this.setStagePos(\n          time ? x : this.stage_pos.x,\n          ydir\n            ? ydir == \"up\"\n              ? y\n              : y - this.$refs.wrapper.offsetHeight\n            : this.stage_pos.y\n        );\n      }\n    }\n  }\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!./PianoRoll.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!./PianoRoll.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PianoRoll.vue?vue&type=template&id=5b42e586&\"\nimport script from \"./PianoRoll.js?vue&type=script&lang=js&\"\nexport * from \"./PianoRoll.js?vue&type=script&lang=js&\"\nimport style0 from \"./PianoRoll.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home\">\n    <b-row class=\"mb-2 pianoroll-control\">\n      <b-col sm=\"2\">\n        <b-button disabled class=\"float-left\"\n          >scale:{{ Number(pianoroll_scale).toFixed(2) }}</b-button\n        >\n      </b-col>\n      <b-col sm=\"6\">\n        <b-form-input\n          type=\"range\"\n          v-model.number=\"pianoroll_scale\"\n          min=\"0.5\"\n          max=\"4\"\n          step=\"0.25\"\n          variant=\"secondary\"\n        />\n      </b-col>\n      <b-col sm=\"3\">\n        <b-dropdown :text=\"`grid:${pianoroll_quantize}`\" class=\"float-right\">\n          <b-dropdown-item\n            v-for=\"o in pianoroll_quantize_options\"\n            :key=\"o\"\n            @click=\"pianoroll_quantize = o\"\n            >{{ o }}</b-dropdown-item\n          >\n        </b-dropdown>\n      </b-col>\n    </b-row>\n    <piano-roll\n      class=\"piano-roll mb-2\"\n      :scale=\"pianoroll_scale\"\n      :quantize=\"pianoroll_quantize\"\n    />\n    <b-row class=\"mb-2 tranport\">\n      <b-col sm=\"12\">\n        <b-button-group size=\"sm\">\n          <b-button variant=\"success\" @click=\"playTransport\">Play</b-button>\n          <b-button @click=\"stopTransport\">Stop</b-button>\n          <b-button disabled>\n            <b-spinner small type=\"grow\" v-if=\"transportPlaying\"></b-spinner>\n            {{ transportPositionBars }}\n          </b-button>\n        </b-button-group>\n      </b-col>\n    </b-row>\n\n    <mml-editor />\n  </div>\n</template>\n\n<style lang=\"scss\">\n.home {\n  text-align: left;\n  .pianoroll-control {\n    height: 48px;\n    & > div:nth-child(2) {\n      padding-top: 6px;\n    }\n  }\n  .piano-roll {\n    height: 350px;\n  }\n  .tranport button {\n    min-width: 6em;\n  }\n}\n</style>\n<script>\n// @ is an alias to /src\nimport MmlEditor from \"@/components/MmlEditor.vue\";\nimport PianoRoll from \"@/components/PianoRoll.vue\";\n\nimport StartAudioContext from \"startaudiocontext\";\nimport { mapState } from \"vuex\";\n\nimport _ from \"lodash\";\n\n// require styles\nexport default {\n  name: \"home\",\n  components: {\n    MmlEditor,\n    PianoRoll\n  },\n  data() {\n    return {\n      pianoroll_scale: 1.0,\n      pianoroll_quantize: 16,\n      pianoroll_quantize_options: [32, 24, 16, 12, 9, 8, 4, 3, 2, 1],\n      transportPosition: 0\n    };\n  },\n  computed: {\n    transportPositionBars() {\n      let m = _.padStart(Math.floor(this.transportPosition / 4), 3, \"0\"),\n        b = Math.floor(this.transportPosition % 4),\n        s = _.padStart(Math.floor((this.transportPosition % 1) * 16), 2, \"0\");\n      return `${m}:${b}:${s}`;\n    },\n    ...mapState(\"engine\", {\n      transportPlaying: \"transportPlaying\"\n    })\n  },\n  mounted() {\n    this.$store.subscribeAction((action, state) => {\n      if (action.type == \"engine/tickSequence\") {\n        this.transportPosition = action.payload;\n      }\n    });\n  },\n  methods: {\n    playTransport() {\n      this.$store.dispatch(\"engine/playSequence\");\n    },\n    stopTransport() {\n      this.$store.dispatch(\"engine/stopSequence\");\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=5489f865&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport Home from \"./views/Home.vue\";\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: \"/\",\n      name: \"home\",\n      component: Home\n    },\n    {\n      path: \"/about\",\n      name: \"about\",\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () =>\n        import(/* webpackChunkName: \"about\" */ \"./views/About.vue\")\n    }\n  ]\n});\n","import P from \"parsimmon\";\nimport _ from \"lodash\";\n\nfunction isEmpty(x) {\n  if (x.name && x.name == \"empty\") return true;\n  if (x.value) {\n    let v = x.value;\n    if (v.hasOwnProperty(\"length\") && v.length == 0) return true;\n  }\n  return x ? false : true;\n}\n\nfunction interpretEscape(str) {\n  const escapes = {\n    b: \"\\b\",\n    f: \"\\f\",\n    n: \"\\n\",\n    r: \"\\r\",\n    t: \"\\t\"\n  };\n  return str.replace(/\\\\(u[0-9a-fA-F]{4}|[^u])/, (_, escape) => {\n    let type = escape.charAt(0);\n    let hex = escape.slice(1);\n    if (type === \"u\") {\n      return String.fromCharCode(parseInt(hex, 16));\n    }\n    if (escapes.hasOwnProperty(type)) {\n      return escapes[type];\n    }\n    return type;\n  });\n}\n\n//\nconst optWhitespace = P.regexp(/[ \\t]*/)\n  .node(\"empty\")\n  .desc(\"whitespace\"); // \"empty\" nodes may be ignored..\nconst whitespace = P.regexp(/[ \\t]+/)\n  .node(\"empty\")\n  .desc(\"whitespace\");\n//\nconst number = P.regexp(/\\d+/).map(a => {\n  return parseInt(a);\n});\n//\nconst string = P.regexp(/\"((?:\\\\.|.)*?)\"/, 1)\n  .map(interpretEscape)\n  .desc(\"string\");\n\nconst identifier = P.regexp(/[a-z0-9_-]+/i).map(x => x.toLowerCase());\n\n//\nconst empty = P.of(\"\").node(\"empty\");\n\n//\nconst comment = P.regexp(/\\s*\\/\\/.*/)\n  .node(\"empty\")\n  .desc(\"comment\");\n\nconst Mml = P.createLanguage({\n  interval: r => {\n    return P.regexp(/[a-g][#+-]?/i)\n      .map(s => {\n        return s.toLowerCase();\n      })\n      .node(\"interval\")\n      .desc(\"note\");\n  },\n  rest: r => {\n    return P.regexp(/r/i)\n      .node(\"rest\")\n      .desc(\"R\");\n  },\n  length: r => {\n    return P.alt(number, P.regexp(/[.^+\\-\\\\]/))\n      .many()\n      .node(\"length\")\n      .desc(\"length\");\n  },\n  slur: r => P.string(\"&\").node(\"slur\"),\n  withLength: r => {\n    return P.seq(\n      P.alt(r.interval, r.rest),\n      r.length.or(empty).skip(optWhitespace), //optional\n      r.slur.or(empty).skip(optWhitespace) //optional\n    );\n  },\n  setLength: r => {\n    return P.seq(\n      P.alt(\n        P.regexp(/l/i)\n          .map(s => s.toLowerCase())\n          .node(\"length_set\")\n          .desc(\"L\")\n      ),\n      r.length\n    );\n  },\n  withAmount: r => {\n    return P.seq(\n      P.alt(\n        P.regexp(/o/i)\n          .node(\"octave_set\")\n          .desc(\"O\"),\n        P.regexp(/q/i)\n          .node(\"quantize_set\")\n          .desc(\"Q\"),\n        P.regexp(/t/i)\n          .node(\"bpm_set\")\n          .desc(\"T\"),\n        P.regexp(/v/i)\n          .node(\"velocity_set\")\n          .desc(\"V\")\n      ),\n      number.node(\"amount\")\n    ).desc(\"number\");\n  },\n  command: r => {\n    return P.alt(\n      P.string(\">\").node(\"octave_shift\"),\n      P.string(\"<\").node(\"octave_shift\")\n    );\n  },\n  loop_start: r => P.string(\"[\").node(\"loop_start\"),\n  loop_branch: r => P.string(\"|\").node(\"loop_branch\"),\n  loop_end: r => {\n    return P.seqMap(P.string(\"]\"), number.or(empty), (cl, count) => {\n      if (count.name == \"empty\") return 2;\n      return count;\n    }).node(\"loop_end\");\n  },\n  setTone: r => {\n    return P.seqMap(\n      P.string(\"@\"),\n      P.alt(\n        number,\n        P.seqMap(P.string(\"`\"), identifier, P.string(\"`\"), (o, name, c) => name)\n      ).desc(\"name\"),\n      (atmark, name) => name\n    )\n      .node(\"set_tone\")\n      .desc(\"@0 or @`a`\");\n  },\n  mml: r => {\n    return P.alt(\n      r.withLength,\n      r.setLength,\n      r.withAmount,\n      r.command,\n      r.loop_start,\n      r.loop_branch,\n      r.loop_end,\n      r.setTone,\n      comment\n    )\n      .skip(optWhitespace)\n      .many()\n      .map(r => {\n        return r.flat().filter(x => {\n          return !isEmpty(x);\n        });\n      });\n  }\n});\n\nconst trackName = P.seqMap(\n  P.regexp(/[a-z0-9]/i),\n  P.seqMap(P.string(\"-\"), P.regexp(/[a-z0-9]/i), (a, b) => b).or(empty),\n  (start, end) => {\n    if (isEmpty(end)) {\n      return [start.toLowerCase()];\n    } else {\n      // expand trackname\n      const s = start.toLowerCase(),\n        e = end.toLowerCase(),\n        sc = s.charCodeAt(0),\n        ec = e.charCodeAt(0),\n        CODE_A = \"a\".charCodeAt(0),\n        CODE_Z = \"z\".charCodeAt(0),\n        CODE_0 = \"0\".charCodeAt(0),\n        CODE_9 = \"9\".charCodeAt(0);\n      const ret = [];\n      if (sc >= CODE_A && sc <= CODE_Z && ec >= CODE_A && ec <= CODE_Z) {\n        return _.range(sc, ec + 1).map(x => String.fromCharCode(x));\n      } else if (sc >= CODE_0 && sc <= CODE_9 && ec >= CODE_0 && ec <= CODE_9) {\n        return _.range(sc, ec + 1).map(x => String.fromCharCode(x));\n      } else {\n        return [s, e];\n      }\n    }\n  }\n)\n  .many()\n  .map(a => _.flatten(a))\n  .desc(\"trackName\");\n\nconst track = P.seqMap(trackName, whitespace, Mml.mml, (tr, sp, mml) => {\n  return {\n    target: tr,\n    mml: mml\n  };\n})\n  .trim(optWhitespace)\n  .node(\"track\")\n  .desc(\"track\");\n\nconst setParams = P.createLanguage({\n  whitespace: r => P.alt(P.whitespace, comment).many(), //with newline...\n  optWhitespace: r => P.alt(r.whitespace, empty),\n  value: r => {\n    return P.seqMap(\n      identifier\n        .map(x => x.toLowerCase())\n        .trim(optWhitespace)\n        .desc(\"key\"),\n      P.string(\":\"),\n      P.alt(number, string, P.of(\"\"))\n        .trim(r.optWhitespace)\n        .node(\"define_tone_value\")\n        .sepBy(P.string(\",\")),\n      (ident, colon, values) => [ident, values]\n    );\n  },\n  toneName: r => {\n    return P.alt(\n      number,\n      P.seqMap(P.string(\"`\"), identifier, P.string(\"`\"), (o, v, c) => v)\n    );\n  },\n  tone: r => {\n    return P.seqMap(\n      P.string(\"@\"),\n      r.toneName.desc(\"name\"),\n      P.string(\":\").trim(r.optWhitespace),\n      identifier.desc(\"type\"),\n      r.optWhitespace,\n      P.string(\"{\"),\n      r.value.many().trim(r.optWhitespace),\n      P.string(\"}\"),\n      comment.or(empty),\n      (s, name, div, type, sp, o, params, c) => {\n        return {\n          name,\n          type,\n          params: _.zipObject(params.map(x => x[0]), params.map(x => x[1]))\n        };\n      }\n    )\n      .trim(optWhitespace)\n      .node(\"define_tone\");\n  }\n});\n\nconst setGlobal = P.createLanguage({\n  track: r => {\n    return P.seqMap(\n      P.string(\"track\"),\n      whitespace,\n      trackName,\n      whitespace,\n      identifier,\n      (sig, sp1, target, sp2, type) => {\n        return {\n          target,\n          type\n        };\n      }\n    ).node(\"define_track\");\n  },\n  tempo: r => {\n    return P.seqMap(P.string(\"tempo\"), whitespace, number, (sig, sp, tempo) => {\n      return tempo;\n    }).node(\"define_tempo\");\n  },\n  define: r => {\n    return P.seqMap(\n      P.string(\"#\"),\n      P.alt(r.tempo, r.track),\n      comment.or(empty),\n      (def, node, c) => node\n    ).trim(optWhitespace);\n  }\n});\n\nconst MmlParser = P.alt(comment, track, setParams.tone, setGlobal.define, empty)\n  .sepBy(P.newline)\n  .map(r => {\n    return r.filter(x => {\n      return !isEmpty(x);\n    });\n  });\n\nexport default MmlParser;\n","import MmlParser from \"./parser.js\";\nimport _ from \"lodash\";\n\nconst triggerError = (message, start, end) => {\n  const err = new SyntaxError(message);\n  err.start = _.clone(start);\n  if (end) {\n    err.end = _.clone(end);\n  } else {\n    err.end = {\n      line: start.line,\n      column: start.column + 1\n    };\n  }\n  throw err;\n};\n\nconst limit = (min, max, value) => {\n  return Math.max(min, Math.min(max, value));\n};\n\nclass TokenScanner {\n  constructor(token) {\n    this.token = token;\n    this.index = 0;\n  }\n  hasNext() {\n    return this.index < this.token.length;\n  }\n  peek() {\n    return this.token[this.index] || null;\n  }\n  prev() {\n    return this.index > 0 ? this.token[this.index - 1] || null : null;\n  }\n  next() {\n    return this.token[this.index++];\n  }\n  match(name) {\n    let c = this.peek();\n    return c && c.name === name;\n  }\n  expect(name) {\n    let c = this.peek();\n    if (c && c.name == name) {\n      return this.next();\n    }\n    triggerError(`compile error: Expected ${name}`, c.start, c.end);\n  }\n  setIndex(index) {\n    this.index = index;\n  }\n  getIndex() {\n    return this.index;\n  }\n}\n\nclass MmlCompiler {\n  constructor() {\n    this.defaultParams = {\n      octave: 4,\n      length: 1.0,\n      velocity: 8 / 15,\n      quantize: 1.0\n    };\n    this.tempo = null;\n    this.clear();\n  }\n  clear() {\n    this.index = 1;\n    this.tracks = {};\n    this.tones = {};\n  }\n  getTrack(name) {\n    if (this.tracks[name]) {\n      return this.tracks[name];\n    }\n    return this.createTrack(name);\n  }\n  createTrack(name) {\n    this.tracks[name] = _.merge(\n      {\n        time: 0,\n        type: null,\n        data: [],\n        name\n      },\n      this.defaultParams\n    );\n    return this.tracks[name];\n  }\n  getData() {\n    return _.mapValues(this.tracks, tr => tr.data);\n  }\n  getTone() {\n    return this.tones;\n  }\n  getTrackType() {\n    return _.mapValues(this.tracks, tr => tr.type);\n  }\n  compile(src) {\n    this.clear();\n    const ast = MmlParser.parse(src);\n    if (ast.status === false) {\n      const expected = ast.expected.join(\" or \");\n      triggerError(\n        `parse error: expected ${expected}`,\n        {\n          line: ast.index.line,\n          column: ast.index.column\n        },\n        {\n          line: ast.index.line,\n          column: src.split(/\\n/)[ast.index.line - 1].length + 1\n        }\n      );\n    }\n    //base layer\n    const token = {};\n    ast.value.forEach(n => {\n      if (n.name == \"track\") {\n        n.value.target.forEach(name => {\n          let track = this.getTrack(name);\n          if (!token[name]) token[name] = [];\n          Array.prototype.push.apply(token[name], n.value.mml);\n        });\n      } else if (n.name == \"define_tone\") {\n        const def = n.value;\n        this.tones[def.name] = _.merge(\n          {\n            start: n.start,\n            end: n.end\n          },\n          def\n        );\n      } else if (n.name == \"define_track\") {\n        const def = n.value;\n        def.target.forEach(tr => {\n          let track = this.getTrack(tr);\n          track.type = def.type;\n        });\n      } else if (n.name == \"define_tempo\") {\n        this.tempo = n.value;\n      }\n    });\n    _.forIn(this.tracks, (track, name) => {\n      if (token[name]) this.compileMml(track, token[name]);\n    });\n    return this.getData();\n  }\n  compileMml(track, token) {\n    let is_slur = false;\n    const calcDuration = (length, quantize) => {\n      return length * quantize;\n    };\n    const calcLength = node => {\n      const len = node.value;\n      let length = 0,\n        last_ln = null,\n        tie = 1;\n      len.forEach((ln, i) => {\n        switch (ln) {\n          case 0:\n            break;\n          case \"+\":\n          case \"^\":\n          case \"\\\\\":\n          case \"-\":\n            if (last_ln === null) {\n              length += track.length * tie;\n              last_ln = track.length;\n            } else {\n              last_ln = null;\n            }\n            tie = ln == \"+\" || ln == \"^\" ? 1 : -1;\n            if (i == len.length - 1) {\n              length += track.length * tie;\n            }\n            break;\n          case \".\":\n            if (last_ln === null) {\n              length += track.length * tie;\n              last_ln = track.length;\n            }\n            last_ln = last_ln / 2;\n            length += last_ln * tie;\n            break;\n          default:\n            last_ln = 4 / ln;\n            length += last_ln * tie;\n            break;\n        }\n        //        console.log(len, ln, length);\n      });\n      if (length <= 0) {\n        triggerError(`compile error: Invalid length`, node.start, node.end);\n      }\n      return length;\n    };\n    const push = event => {\n      track.data.push(\n        _.merge(\n          {\n            id: this.index++,\n            tr: track.name\n          },\n          event\n        )\n      );\n    };\n\n    const scanner = new TokenScanner(token);\n\n    const loop_stack = [];\n    while (scanner.hasNext()) {\n      const s = scanner;\n      const c = s.next();\n      let ln, peek;\n      switch (c.name) {\n        case \"interval\":\n          ln = s.match(\"length\") ? calcLength(s.next()) : track.length;\n          push({\n            type: is_slur ? \"pitch\" : \"note\",\n            interval: String(c.value) + String(track.octave),\n            time: track.time,\n            duration: s.match(\"slur\") ? ln : calcDuration(ln, track.quantize),\n            velocity: track.velocity,\n            start: c.start,\n            end: s.prev().end\n          });\n          track.time += ln;\n          is_slur = false;\n          break;\n        case \"rest\":\n          ln = s.match(\"length\") ? calcLength(s.next()) : track.length;\n          track.time += ln;\n          break;\n        case \"octave_set\":\n          track.octave = limit(0, 9, s.expect(\"amount\").value);\n          break;\n        case \"octave_shift\":\n          track.octave += c.value == \">\" ? 1 : -1;\n          track.octave = limit(0, 8, track.octave);\n          break;\n        case \"length_set\":\n          track.length = calcLength(s.expect(\"length\"));\n          break;\n        case \"velocity_set\":\n          track.velocity = limit(0, 1, s.expect(\"amount\").value / 15);\n          break;\n        case \"quantize_set\":\n          track.quantize = limit(0, 1, s.expect(\"amount\").value / 8);\n          break;\n        case \"slur\":\n          is_slur = true;\n          break;\n        case \"bpm_set\":\n          push({\n            type: \"bpm\",\n            time: track.time,\n            bpm: limit(1, 600, s.expect(\"amount\").value),\n            start: c.start,\n            end: s.prev().end\n          });\n          break;\n        case \"loop_start\":\n          loop_stack.push({\n            index: s.getIndex(),\n            count: null,\n            time: track.time\n          });\n          break;\n        case \"loop_branch\":\n          peek = loop_stack[loop_stack.length - 1];\n          if (peek.count === 1) {\n            loop_stack.pop();\n            s.setIndex(peek.endIndex);\n          }\n          break;\n        case \"loop_end\":\n          if (loop_stack.length == 0) {\n            triggerError(`compileError: missing \"[\"`, c.start, c.end);\n          }\n          peek = loop_stack[loop_stack.length - 1];\n          if (peek.count === null) {\n            if (c.value === 0) {\n              push({\n                type: \"runtime_loop\",\n                count: c.value,\n                time: peek.time,\n                start: peek.time,\n                end: track.time\n              });\n            }\n            peek.count = c.value;\n            peek.endIndex = s.getIndex();\n          }\n          peek.count--;\n          if (peek.count > 0) {\n            s.setIndex(peek.index);\n          } else {\n            loop_stack.pop();\n          }\n          break;\n        case \"set_tone\":\n          // if (!this.tones[c.value]) {\n          //   triggerError(`compileError: undefined tone`, c.start, c.end);\n          // }\n          //   if (this.tones[c.value].type != track.type) {\n          //     const to_type = this.tones[c.value].type;\n          //     const tr_type = track.type;\n          //     triggerError(\n          //       `compileError: invalid tone type. tone type is ${to_type},but track type is ${tr_type}`,\n          //       c.start,\n          //       c.end\n          //     );\n          //   }\n          push({\n            type: \"set_tone\",\n            tone: c.value,\n            time: track.time\n          });\n          break;\n        default:\n          break;\n      }\n    }\n  }\n}\n\nexport default new MmlCompiler();\n","import { MmlCompiler as compiler } from \"../lib/mml\";\nimport _ from \"lodash\";\nexport default {\n  namespaced: true,\n  state: {\n    mml: \"\",\n    mmlError: null,\n    trackType: {},\n    tone: {},\n    tempo: 120,\n    sequence: [],\n    transportPlaying: false\n  },\n  getters: {\n    noteSequence: state => {\n      return _.flatten(\n        _.map(state.sequence, data =>\n          data.filter(evt => {\n            return evt.type == \"note\" || evt.type == \"pitch\";\n          })\n        )\n      );\n    }\n  },\n  mutations: {\n    updateSequence(state, sequence) {\n      state.sequence = sequence;\n    },\n    updateTrackType(state, type) {\n      state.trackType = type;\n    },\n    updateTone(state, tone) {\n      state.tone = tone;\n    },\n    updateTempo(state, tempo) {\n      state.tempo = tempo;\n    },\n    updateMml: (state, mml) => {\n      state.mml = mml;\n    },\n    updateMmlError: (state, error) => {\n      state.mmlError = error;\n    },\n    updateTransportPlaying: (state, isPlaying) => {\n      state.transportPlaying = isPlaying;\n    }\n  },\n  actions: {\n    noteOnTestTone(context, note) {},\n    noteOffTestTone(context) {},\n    changeMML(context, text) {\n      context.commit(\"updateMml\", text);\n      try {\n        context.commit(\"updateSequence\", compiler.compile(text));\n        context.commit(\"updateTrackType\", compiler.getTrackType());\n        context.commit(\"updateTone\", compiler.getTone());\n        context.commit(\"updateTempo\", compiler.tempo);\n        context.commit(\"updateMmlError\", null);\n      } catch (e) {\n        console.error(e);\n        context.dispatch(\"errorMML\", e);\n      }\n    },\n    changeCursorMML(context, pos) {},\n    errorMML(context, e) {\n      context.commit(\"updateMmlError\", e);\n    },\n    changePianoRoll(context, sequence) {\n      context.commit(\"updateSequence\", sequence);\n    },\n    playSequence(context) {\n      context.commit(\"updateTransportPlaying\", true);\n    },\n    stopSequence(context) {\n      context.commit(\"updateTransportPlaying\", false);\n    },\n    tickSequence(context, position) {},\n    beforeNoteOn(context, evt) {},\n    noteOn(context, evt) {},\n    noteOff(context, evt) {},\n    selectNote(context, note) {}\n  }\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\n//modules\nimport engine from \"./store/engine\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: { engine }\n});\n","import \"@babel/polyfill\";\nimport \"mutationobserver-shim\";\nimport Vue from \"vue\";\nimport \"./plugins/bootstrap-vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount(\"#app\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MmlEditor.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}